{
  "experiments": [
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "name": "lwnrv",
      "createdAt": "2025-11-11T23:08:02.702Z",
      "updatedAt": "2025-11-11T23:08:02.702Z",
      "storage": "drive"
    }
  ],
  "trials": [
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "data": {
        "trials": [
          {
            "id": 1762902515317,
            "type": "Trial",
            "name": "Loopsiono",
            "parameters": {
              "includesExtensions": false,
              "extensionType": ""
            },
            "trialCode": "\n    const preloadLoopsiono = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadLoopsiono);\n    \n    const test_stimuli_Loopsiono = [{stimulus: \"<div id=\\\"if8h\\\" style=\\\"box-sizing: border-box;\\\">loop?</div>\",\nchoices: [\"SI\",\"NO\"]}];\n    const Loopsiono_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus\"),\nchoices: jsPsych.timelineVariable(\"choices\"),\n      data: {\n        rt: \"rt\",\nresponse: \"response\",\nstimulus: \"stimulus\",\n        trial_id: 1762902515317,\n        \n        \n        branches: [1762902521115, \"loop_1762902533581\"],\n        branchConditions: [[{\"id\":1762903077448,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"loop_1762902533581\",\"customParameters\":{}},{\"id\":1762903083147,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"1762902521115\",\"customParameters\":{}}]] \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials outside loops, use window.branchCustomParameters\n      if (window.branchCustomParameters && typeof window.branchCustomParameters === 'object') {\n        console.log('Applying custom parameters to trial:', window.branchCustomParameters);\n        Object.entries(window.branchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        window.branchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      \n      \n      // Si hay múltiples branches Y condiciones, la lógica se maneja en Timeline.tsx\n      \n    },\n    };\n    const Loopsiono_procedure = {\n    timeline: \n    [Loopsiono_timeline],\n    timeline_variables: test_stimuli_Loopsiono,\n    conditional_function: function() {\n      const currentId = 1762902515317;\n      \n      // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n      const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n      if (jumpToTrial) {\n        if (String(currentId) === String(jumpToTrial)) {\n          // Encontramos el trial objetivo para repeat/jump\n          console.log('Repeat/jump: Found target trial', currentId);\n          localStorage.removeItem('jsPsych_jumpToTrial');\n          return true;\n        }\n        // No es el objetivo, saltar\n        console.log('Repeat/jump: Skipping trial', currentId);\n        return false;\n      }\n      \n      // Si skipRemaining está activo (branching normal), verificar si este es el trial objetivo\n      if (window.skipRemaining) {\n        if (String(currentId) === String(window.nextTrialId)) {\n          // Encontramos el trial objetivo\n          window.skipRemaining = false;\n          window.nextTrialId = null;\n          return true;\n        }\n        // No es el objetivo, saltar\n        return false;\n      }\n      \n      return true;\n    },\n    \n    };\n    timeline.push(Loopsiono_procedure);\n  ",
            "plugin": "plugin-html-button-response",
            "branches": [
              1762902521115,
              "loop_1762902533581"
            ],
            "columnMapping": {
              "stimulus": {
                "source": "typed",
                "value": "<div id=\"if8h\" style=\"box-sizing: border-box;\">loop?</div>"
              },
              "choices": {
                "source": "typed",
                "value": [
                  "SI",
                  "NO"
                ]
              },
              "prompt": {
                "source": "none",
                "value": null
              },
              "trial_duration": {
                "source": "none",
                "value": null
              },
              "response_ends_trial": {
                "source": "none",
                "value": null
              },
              "trial_ends_after_audio": {
                "source": "none",
                "value": null
              },
              "response_allowed_while_playing": {
                "source": "none",
                "value": null
              },
              "button_html": {
                "source": "none",
                "value": null
              },
              "stimulus_duration": {
                "source": "none",
                "value": null
              },
              "button_layout": {
                "source": "none",
                "value": null
              },
              "grid_rows": {
                "source": "none",
                "value": null
              },
              "grid_columns": {
                "source": "none",
                "value": null
              },
              "enable_button_after": {
                "source": "none",
                "value": null
              }
            },
            "csvJson": [],
            "csvColumns": [],
            "orders": false,
            "orderColumns": [],
            "stimuliOrders": [],
            "categories": false,
            "categoryColumn": "",
            "branchConditions": [
              {
                "id": 1762903077448,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "loop_1762902533581",
                "customParameters": {}
              },
              {
                "id": 1762903083147,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762902521115",
                "customParameters": {}
              }
            ],
            "repeatConditions": []
          },
          {
            "id": 1762902521115,
            "type": "Trial",
            "name": "Puesno",
            "parameters": {
              "includesExtensions": false,
              "extensionType": ""
            },
            "trialCode": "\n    const preloadPuesno = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadPuesno);\n    \n    const test_stimuli_Puesno = [{stimulus: \"<div id=\\\"indp\\\" style=\\\"box-sizing: border-box;\\\">Pues no</div>\",\nchoices: [\"QUENOo\"]}];\n    const Puesno_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus\"),\nchoices: jsPsych.timelineVariable(\"choices\"),\n      data: {\n        rt: \"rt\",\nresponse: \"response\",\nstimulus: \"stimulus\",\n        trial_id: 1762902521115,\n        \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials outside loops, use window.branchCustomParameters\n      if (window.branchCustomParameters && typeof window.branchCustomParameters === 'object') {\n        console.log('Applying custom parameters to trial:', window.branchCustomParameters);\n        Object.entries(window.branchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        window.branchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      \n      // Evaluar repeat conditions (para reiniciar el experimento desde un trial específico)\n      const repeatConditionsArray = [{\"id\":1762903134167,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"jumpToTrialId\":\"1762902515317\"}];\n      \n      for (const condition of repeatConditionsArray) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch && condition.jumpToTrialId) {\n          console.log('Repeat condition matched! Jumping to trial:', condition.jumpToTrialId);\n          // Guardar el trial objetivo en localStorage\n          localStorage.setItem('jsPsych_jumpToTrial', String(condition.jumpToTrialId));\n          // Limpiar el contenedor de jsPsych (jspsych-container es el display_element)\n          const container = document.getElementById('jspsych-container');\n          if (container) {\n            // Limpiar todo el contenido del container\n            container.innerHTML = '';\n          }\n          // Reiniciar el timeline\n          setTimeout(() => {\n            jsPsych.run(timeline);\n          }, 100);\n          return;\n        }\n      }\n      \n      \n      // Este trial no tiene branches, es un trial terminal\n      // Si llegamos aquí después de un branching, terminar el experimento\n      if (window.branchingActive) {\n        jsPsych.abortExperiment('', {});\n      }\n      \n    },\n    };\n    const Puesno_procedure = {\n    timeline: \n    [Puesno_timeline],\n    timeline_variables: test_stimuli_Puesno,\n    conditional_function: function() {\n      const currentId = 1762902521115;\n      \n      // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n      const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n      if (jumpToTrial) {\n        if (String(currentId) === String(jumpToTrial)) {\n          // Encontramos el trial objetivo para repeat/jump\n          console.log('Repeat/jump: Found target trial', currentId);\n          localStorage.removeItem('jsPsych_jumpToTrial');\n          return true;\n        }\n        // No es el objetivo, saltar\n        console.log('Repeat/jump: Skipping trial', currentId);\n        return false;\n      }\n      \n      // Si skipRemaining está activo (branching normal), verificar si este es el trial objetivo\n      if (window.skipRemaining) {\n        if (String(currentId) === String(window.nextTrialId)) {\n          // Encontramos el trial objetivo\n          window.skipRemaining = false;\n          window.nextTrialId = null;\n          return true;\n        }\n        // No es el objetivo, saltar\n        return false;\n      }\n      \n      return true;\n    },\n    \n    };\n    timeline.push(Puesno_procedure);\n  ",
            "plugin": "plugin-html-button-response",
            "columnMapping": {
              "stimulus": {
                "source": "typed",
                "value": "<div id=\"indp\" style=\"box-sizing: border-box;\">Pues no</div>"
              },
              "choices": {
                "source": "typed",
                "value": [
                  "QUENOo"
                ]
              },
              "button_html": {
                "source": "none",
                "value": null
              },
              "prompt": {
                "source": "none",
                "value": null
              },
              "trial_duration": {
                "source": "none",
                "value": null
              },
              "button_layout": {
                "source": "none",
                "value": null
              },
              "grid_rows": {
                "source": "none",
                "value": null
              },
              "grid_columns": {
                "source": "none",
                "value": null
              },
              "response_ends_trial": {
                "source": "none",
                "value": null
              },
              "trial_ends_after_audio": {
                "source": "none",
                "value": null
              },
              "response_allowed_while_playing": {
                "source": "none",
                "value": null
              },
              "enable_button_after": {
                "source": "none",
                "value": null
              },
              "stimulus_duration": {
                "source": "none",
                "value": null
              }
            },
            "csvJson": [],
            "csvColumns": [],
            "orders": false,
            "orderColumns": [],
            "stimuliOrders": [],
            "categories": false,
            "categoryColumn": "",
            "branchConditions": [
              {
                "id": 1762903115767,
                "rules": [
                  {
                    "prop": "",
                    "op": "==",
                    "value": ""
                  }
                ],
                "nextTrialId": null,
                "customParameters": {}
              }
            ],
            "repeatConditions": [
              {
                "id": 1762903134167,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "jumpToTrialId": "1762902515317"
              }
            ]
          },
          {
            "id": "loop_1762902533581",
            "name": "Loop 1",
            "repetitions": 1,
            "randomize": false,
            "orders": false,
            "stimuliOrders": [],
            "orderColumns": [],
            "categoryColumn": "",
            "categories": false,
            "categoryData": [],
            "trials": [
              {
                "id": 1762902524841,
                "type": "Trial",
                "name": "nested",
                "parameters": {
                  "includesExtensions": false,
                  "extensionType": ""
                },
                "trialCode": "\n    const preloadnested = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadnested);\n    \n    const nested_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_nested\"),\nchoices: jsPsych.timelineVariable(\"choices_nested\"),\n      data: {\n        rt: \"rt_nested\",\nresponse: \"response_nested\",\nstimulus: \"stimulus_nested\",\n        trial_id: 1762902524841,\n        isInLoop: true,\n        \n        branches: [1762902528773, 1762902912364],\n        branchConditions: [[{\"id\":1762902986815,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762902528773\",\"customParameters\":{}},{\"id\":1762902993518,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"loop_1762907705296\",\"customParameters\":{}}]] \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof BranchCustomParameters !== 'undefined' && BranchCustomParameters && typeof BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', BranchCustomParameters);\n        Object.entries(BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Evaluar condiciones del trial para branching interno del loop\n      const branches = [1762902528773, 1762902912364];\n      const branchConditions = [{\"id\":1762902986815,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762902528773\",\"customParameters\":{}},{\"id\":1762902993518,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"loop_1762907705296\",\"customParameters\":{}}].flat();\n      \n      let nextTrialId = null;\n      let matchedCustomParameters = null;\n      \n      // Evaluar cada condición (lógica OR entre condiciones)\n      for (const condition of branchConditions) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch) {\n          nextTrialId = condition.nextTrialId;\n          // Store custom parameters if they exist\n          if (condition.customParameters) {\n            matchedCustomParameters = condition.customParameters;\n            console.log('Loop branching: matched custom parameters:', matchedCustomParameters);\n          }\n          break;\n        }\n      }\n      \n      // Si se encontró match, activar branching\n      if (nextTrialId) {\n        NextTrialId = nextTrialId;\n        SkipRemaining = true;\n        BranchingActive = true;\n        // Store custom parameters for the next trial in the loop\n        if (matchedCustomParameters) {\n          BranchCustomParameters = matchedCustomParameters;\n        }\n      }\n    },};",
                "plugin": "plugin-html-button-response",
                "columnMapping": {
                  "stimulus": {
                    "source": "typed",
                    "value": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>"
                  },
                  "choices": {
                    "source": "typed",
                    "value": [
                      "Seguir",
                      "Salirn"
                    ]
                  },
                  "button_html": {
                    "source": "none",
                    "value": null
                  },
                  "prompt": {
                    "source": "none",
                    "value": null
                  },
                  "trial_duration": {
                    "source": "none",
                    "value": null
                  },
                  "button_layout": {
                    "source": "none",
                    "value": null
                  },
                  "grid_rows": {
                    "source": "none",
                    "value": null
                  },
                  "grid_columns": {
                    "source": "none",
                    "value": null
                  },
                  "response_ends_trial": {
                    "source": "none",
                    "value": null
                  },
                  "trial_ends_after_audio": {
                    "source": "none",
                    "value": null
                  },
                  "response_allowed_while_playing": {
                    "source": "none",
                    "value": null
                  },
                  "enable_button_after": {
                    "source": "none",
                    "value": null
                  },
                  "stimulus_duration": {
                    "source": "none",
                    "value": null
                  }
                },
                "csvJson": [],
                "csvColumns": [],
                "orders": false,
                "orderColumns": [],
                "stimuliOrders": [],
                "categories": false,
                "categoryColumn": "",
                "branches": [
                  1762902528773,
                  1762902912364
                ],
                "csvFromLoop": true,
                "branchConditions": [
                  {
                    "id": 1762902986815,
                    "rules": [
                      {
                        "prop": "response",
                        "op": "==",
                        "value": "0"
                      }
                    ],
                    "nextTrialId": "1762902528773",
                    "customParameters": {}
                  },
                  {
                    "id": 1762902993518,
                    "rules": [
                      {
                        "prop": "response",
                        "op": "==",
                        "value": "1"
                      }
                    ],
                    "nextTrialId": "loop_1762907705296",
                    "customParameters": {}
                  }
                ],
                "repeatConditions": [],
                "prevCsvJson": [],
                "prevCsvColumns": [],
                "parentId": "loop_1762902533581"
              },
              {
                "id": 1762902528773,
                "type": "Trial",
                "name": "Seguir",
                "parameters": {
                  "includesExtensions": false,
                  "extensionType": ""
                },
                "trialCode": "\n    const preloadSeguir = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadSeguir);\n    \n    const Seguir_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_Seguir\"),\nchoices: jsPsych.timelineVariable(\"choices_Seguir\"),\n      data: {\n        rt: \"rt_Seguir\",\nresponse: \"response_Seguir\",\nstimulus: \"stimulus_Seguir\",\n        trial_id: 1762902528773,\n        isInLoop: true,\n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loopBranchCustomParameters\n      if (typeof loopBranchCustomParameters !== 'undefined' && loopBranchCustomParameters && typeof loopBranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loopBranchCustomParameters);\n        Object.entries(loopBranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loopBranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Evaluar repeat conditions (para reiniciar el experimento desde un trial específico)\n      const repeatConditionsArray = [{\"id\":1762903488868,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"jumpToTrialId\":\"1762902515317\"}];\n      \n      let shouldRepeat = false;\n      for (const condition of repeatConditionsArray) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch && condition.jumpToTrialId) {\n          console.log('Repeat condition matched in loop! Jumping to trial:', condition.jumpToTrialId);\n          // Guardar el trial objetivo en localStorage\n          localStorage.setItem('jsPsych_jumpToTrial', String(condition.jumpToTrialId));\n          shouldRepeat = true;\n          break;\n        }\n      }\n      \n      if (shouldRepeat) {\n        // Limpiar el contenedor de jsPsych (jspsych-container es el display_element)\n        const container = document.getElementById('jspsych-container');\n        if (container) {\n          // Limpiar todo el contenido del container\n          container.innerHTML = '';\n        }\n        // Reiniciar el timeline\n        setTimeout(() => {\n          jsPsych.run(timeline);\n        }, 100);\n        return;\n      }\n      \n      \n      // Este trial no tiene branches, verificar si el loop padre tiene branches\n      if (typeof loopHasBranches !== 'undefined' && loopHasBranches) {\n        // El loop tiene branches, activar branching del loop al terminar\n        // Esto se manejará en el on_finish del loop\n        loopShouldBranchOnFinish = true;\n      } else if (!loopHasBranches) {\n        // Ni el trial ni el loop tienen branches - trial terminal\n        // Si llegamos aquí después de un branching global, terminar el experimento\n        if (window.branchingActive) {\n          jsPsych.abortExperiment('', {});\n        }\n      }\n      \n    },};",
                "plugin": "plugin-html-button-response",
                "columnMapping": {
                  "stimulus": {
                    "source": "typed",
                    "value": "<div id=\"ip4y\" style=\"box-sizing: border-box;\">Seguir</div>"
                  },
                  "choices": {
                    "source": "typed",
                    "value": [
                      "SI",
                      "No"
                    ]
                  },
                  "prompt": {
                    "source": "none",
                    "value": null
                  },
                  "trial_duration": {
                    "source": "none",
                    "value": null
                  },
                  "response_ends_trial": {
                    "source": "none",
                    "value": null
                  },
                  "trial_ends_after_audio": {
                    "source": "none",
                    "value": null
                  },
                  "response_allowed_while_playing": {
                    "source": "none",
                    "value": null
                  },
                  "stimulus_duration": {
                    "source": "none",
                    "value": null
                  },
                  "button_html": {
                    "source": "none",
                    "value": null
                  },
                  "button_layout": {
                    "source": "none",
                    "value": null
                  },
                  "grid_rows": {
                    "source": "none",
                    "value": null
                  },
                  "grid_columns": {
                    "source": "none",
                    "value": null
                  },
                  "enable_button_after": {
                    "source": "none",
                    "value": null
                  }
                },
                "orders": false,
                "orderColumns": [],
                "stimuliOrders": [],
                "categories": false,
                "categoryColumn": "",
                "csvFromLoop": true,
                "csvJson": [],
                "csvColumns": [],
                "branchConditions": [],
                "repeatConditions": [
                  {
                    "id": 1762903488868,
                    "rules": [
                      {
                        "prop": "response",
                        "op": "==",
                        "value": "0"
                      }
                    ],
                    "jumpToTrialId": "1762902515317"
                  }
                ],
                "prevCsvJson": [],
                "prevCsvColumns": []
              },
              {
                "id": "loop_1762907705296",
                "name": "Nested Loop 1",
                "repetitions": 1,
                "randomize": false,
                "orders": false,
                "stimuliOrders": [],
                "orderColumns": [],
                "categoryColumn": "",
                "categories": false,
                "categoryData": [],
                "trials": [
                  {
                    "id": 1762902912364,
                    "type": "Trial",
                    "name": "Inicia nested",
                    "parameters": {
                      "includesExtensions": false,
                      "extensionType": ""
                    },
                    "trialCode": "\n    const preloadInicia_nested = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadInicia_nested);\n    \n    const Inicia_nested_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_Inicia_nested\"),\nchoices: jsPsych.timelineVariable(\"choices_Inicia_nested\"),\n      data: {\n        rt: \"rt_Inicia_nested\",\nresponse: \"response_Inicia_nested\",\nstimulus: \"stimulus_Inicia_nested\",\n        trial_id: 1762902912364,\n        isInLoop: true,\n        \n        branches: [1762907671377, 1762912004181],\n        branchConditions: [[{\"id\":1762912351921,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762907671377\",\"customParameters\":{}},{\"id\":1762912364305,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"1762912004181\",\"customParameters\":{}}]] \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof BranchCustomParameters !== 'undefined' && BranchCustomParameters && typeof BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', BranchCustomParameters);\n        Object.entries(BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Evaluar condiciones del trial para branching interno del loop\n      const branches = [1762907671377, 1762912004181];\n      const branchConditions = [{\"id\":1762912351921,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762907671377\",\"customParameters\":{}},{\"id\":1762912364305,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"1762912004181\",\"customParameters\":{}}].flat();\n      \n      let nextTrialId = null;\n      let matchedCustomParameters = null;\n      \n      // Evaluar cada condición (lógica OR entre condiciones)\n      for (const condition of branchConditions) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch) {\n          nextTrialId = condition.nextTrialId;\n          // Store custom parameters if they exist\n          if (condition.customParameters) {\n            matchedCustomParameters = condition.customParameters;\n            console.log('Loop branching: matched custom parameters:', matchedCustomParameters);\n          }\n          break;\n        }\n      }\n      \n      // Si se encontró match, activar branching\n      if (nextTrialId) {\n        NextTrialId = nextTrialId;\n        SkipRemaining = true;\n        BranchingActive = true;\n        // Store custom parameters for the next trial in the loop\n        if (matchedCustomParameters) {\n          BranchCustomParameters = matchedCustomParameters;\n        }\n      }\n    },};",
                    "plugin": "plugin-html-button-response",
                    "columnMapping": {
                      "stimulus": {
                        "source": "typed",
                        "value": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>"
                      },
                      "choices": {
                        "source": "typed",
                        "value": [
                          "Si",
                          "Nos"
                        ]
                      },
                      "button_html": {
                        "source": "none",
                        "value": null
                      },
                      "prompt": {
                        "source": "none",
                        "value": null
                      },
                      "stimulus_duration": {
                        "source": "none",
                        "value": null
                      },
                      "trial_duration": {
                        "source": "none",
                        "value": null
                      },
                      "button_layout": {
                        "source": "none",
                        "value": null
                      },
                      "grid_rows": {
                        "source": "none",
                        "value": null
                      },
                      "grid_columns": {
                        "source": "none",
                        "value": null
                      },
                      "response_ends_trial": {
                        "source": "none",
                        "value": null
                      },
                      "enable_button_after": {
                        "source": "none",
                        "value": null
                      }
                    },
                    "csvJson": [],
                    "csvColumns": [],
                    "orders": false,
                    "orderColumns": [],
                    "stimuliOrders": [],
                    "categories": false,
                    "categoryColumn": "",
                    "paramsOverride": [],
                    "prevCsvJson": [],
                    "prevCsvColumns": [],
                    "csvFromLoop": true,
                    "branches": [
                      1762907671377,
                      1762912004181
                    ],
                    "branchConditions": [
                      {
                        "id": 1762912351921,
                        "rules": [
                          {
                            "prop": "response",
                            "op": "==",
                            "value": "0"
                          }
                        ],
                        "nextTrialId": "1762907671377",
                        "customParameters": {}
                      },
                      {
                        "id": 1762912364305,
                        "rules": [
                          {
                            "prop": "response",
                            "op": "==",
                            "value": "1"
                          }
                        ],
                        "nextTrialId": "1762912004181",
                        "customParameters": {}
                      }
                    ],
                    "repeatConditions": []
                  },
                  {
                    "id": 1762907671377,
                    "type": "Trial",
                    "name": "Final nested",
                    "parameters": {
                      "includesExtensions": false,
                      "extensionType": ""
                    },
                    "trialCode": "\n    const preloadFinal_nested = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadFinal_nested);\n    \n    const test_stimuli_Final_nested = [{stimulus: \"<div id=\\\"isjo\\\" style=\\\"box-sizing: border-box;\\\">final nested</div>\",\nchoices: [\"Repetir\",\"Salirs\"]}];\n    const Final_nested_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus\"),\nchoices: jsPsych.timelineVariable(\"choices\"),\n      data: {\n        rt: \"rt\",\nresponse: \"response\",\nstimulus: \"stimulus\",\n        trial_id: 1762907671377,\n        \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials outside loops, use window.branchCustomParameters\n      if (window.branchCustomParameters && typeof window.branchCustomParameters === 'object') {\n        console.log('Applying custom parameters to trial:', window.branchCustomParameters);\n        Object.entries(window.branchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        window.branchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Este trial no tiene branches ni repeat conditions, es un trial terminal\n      // Si llegamos aquí después de un branching, terminar el experimento\n      if (window.branchingActive) {\n        jsPsych.abortExperiment('', {});\n      }\n    },\n    };\n    const Final_nested_procedure = {\n    timeline: \n    [Final_nested_timeline],\n    timeline_variables: test_stimuli_Final_nested,\n    conditional_function: function() {\n      const currentId = 1762907671377;\n      \n      // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n      const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n      if (jumpToTrial) {\n        if (String(currentId) === String(jumpToTrial)) {\n          // Encontramos el trial objetivo para repeat/jump\n          console.log('Repeat/jump: Found target trial', currentId);\n          localStorage.removeItem('jsPsych_jumpToTrial');\n          return true;\n        }\n        // No es el objetivo, saltar\n        console.log('Repeat/jump: Skipping trial', currentId);\n        return false;\n      }\n      \n      // Si skipRemaining está activo (branching normal), verificar si este es el trial objetivo\n      if (window.skipRemaining) {\n        if (String(currentId) === String(window.nextTrialId)) {\n          // Encontramos el trial objetivo\n          window.skipRemaining = false;\n          window.nextTrialId = null;\n          return true;\n        }\n        // No es el objetivo, saltar\n        return false;\n      }\n      \n      return true;\n    },\n    \n    };\n    timeline.push(Final_nested_procedure);\n  ",
                    "plugin": "plugin-html-button-response",
                    "columnMapping": {
                      "stimulus": {
                        "source": "typed",
                        "value": "<div id=\"isjo\" style=\"box-sizing: border-box;\">final nested</div>"
                      },
                      "choices": {
                        "source": "typed",
                        "value": [
                          "Repetir",
                          "Salirs"
                        ]
                      },
                      "button_html": {
                        "source": "none",
                        "value": null
                      },
                      "prompt": {
                        "source": "none",
                        "value": null
                      },
                      "stimulus_duration": {
                        "source": "none",
                        "value": null
                      },
                      "trial_duration": {
                        "source": "none",
                        "value": null
                      },
                      "button_layout": {
                        "source": "none",
                        "value": null
                      },
                      "grid_rows": {
                        "source": "none",
                        "value": null
                      },
                      "grid_columns": {
                        "source": "none",
                        "value": null
                      },
                      "response_ends_trial": {
                        "source": "none",
                        "value": null
                      },
                      "enable_button_after": {
                        "source": "none",
                        "value": null
                      }
                    },
                    "csvJson": [],
                    "csvColumns": [],
                    "orders": false,
                    "orderColumns": [],
                    "stimuliOrders": [],
                    "categories": false,
                    "categoryColumn": "",
                    "branchConditions": [],
                    "repeatConditions": []
                  },
                  {
                    "id": 1762912004181,
                    "type": "Trial",
                    "name": "otravez",
                    "parameters": {
                      "includesExtensions": false,
                      "extensionType": ""
                    },
                    "trialCode": "\n    const preloadotravez = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadotravez);\n    \n    const test_stimuli_otravez = [{stimulus: \"<div id=\\\"imna\\\" style=\\\"box-sizing: border-box;\\\">otra vez</div>\",\nchoices: [\"Dije que no\"]}];\n    const otravez_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus\"),\nchoices: jsPsych.timelineVariable(\"choices\"),\n      data: {\n        rt: \"rt\",\nresponse: \"response\",\nstimulus: \"stimulus\",\n        trial_id: 1762912004181,\n        \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials outside loops, use window.branchCustomParameters\n      if (window.branchCustomParameters && typeof window.branchCustomParameters === 'object') {\n        console.log('Applying custom parameters to trial:', window.branchCustomParameters);\n        Object.entries(window.branchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        window.branchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Este trial no tiene branches ni repeat conditions, es un trial terminal\n      // Si llegamos aquí después de un branching, terminar el experimento\n      if (window.branchingActive) {\n        jsPsych.abortExperiment('', {});\n      }\n    },\n    };\n    const otravez_procedure = {\n    timeline: \n    [otravez_timeline],\n    timeline_variables: test_stimuli_otravez,\n    conditional_function: function() {\n      const currentId = 1762912004181;\n      \n      // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n      const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n      if (jumpToTrial) {\n        if (String(currentId) === String(jumpToTrial)) {\n          // Encontramos el trial objetivo para repeat/jump\n          console.log('Repeat/jump: Found target trial', currentId);\n          localStorage.removeItem('jsPsych_jumpToTrial');\n          return true;\n        }\n        // No es el objetivo, saltar\n        console.log('Repeat/jump: Skipping trial', currentId);\n        return false;\n      }\n      \n      // Si skipRemaining está activo (branching normal), verificar si este es el trial objetivo\n      if (window.skipRemaining) {\n        if (String(currentId) === String(window.nextTrialId)) {\n          // Encontramos el trial objetivo\n          window.skipRemaining = false;\n          window.nextTrialId = null;\n          return true;\n        }\n        // No es el objetivo, saltar\n        return false;\n      }\n      \n      return true;\n    },\n    \n    };\n    timeline.push(otravez_procedure);\n  ",
                    "plugin": "plugin-html-button-response",
                    "columnMapping": {
                      "stimulus": {
                        "source": "typed",
                        "value": "<div id=\"imna\" style=\"box-sizing: border-box;\">otra vez</div>"
                      },
                      "choices": {
                        "source": "typed",
                        "value": [
                          "Dije que no"
                        ]
                      },
                      "button_html": {
                        "source": "none",
                        "value": null
                      },
                      "prompt": {
                        "source": "none",
                        "value": null
                      },
                      "stimulus_duration": {
                        "source": "none",
                        "value": null
                      },
                      "trial_duration": {
                        "source": "none",
                        "value": null
                      },
                      "button_layout": {
                        "source": "none",
                        "value": null
                      },
                      "grid_rows": {
                        "source": "none",
                        "value": null
                      },
                      "grid_columns": {
                        "source": "none",
                        "value": null
                      },
                      "response_ends_trial": {
                        "source": "none",
                        "value": null
                      },
                      "enable_button_after": {
                        "source": "none",
                        "value": null
                      }
                    },
                    "csvJson": [],
                    "csvColumns": [],
                    "orders": false,
                    "orderColumns": [],
                    "stimuliOrders": [],
                    "categories": false,
                    "categoryColumn": ""
                  }
                ],
                "code": "\n\n    const test_stimuli_loop_1762907705296 = [\n  {\n    \"stimulus_Inicia_nested\": \"<div id=\\\"ip91\\\" style=\\\"box-sizing: border-box;\\\">inicia nested</div>\",\n    \"choices_Inicia_nested\": [\n      \"Si\",\n      \"Nos\"\n    ],\n    \"stimulus_Final_nested\": \"<div id=\\\"isjo\\\" style=\\\"box-sizing: border-box;\\\">final nested</div>\",\n    \"choices_Final_nested\": [\n      \"Repetir\",\n      \"Salirs\"\n    ],\n    \"stimulus_otravez\": \"<div id=\\\"imna\\\" style=\\\"box-sizing: border-box;\\\">otra vez</div>\",\n    \"choices_otravez\": [\n      \"Dije que no\"\n    ]\n  }\n];\n    \n    \n    \n    const preloadInicia_nested = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadInicia_nested);\n    \n    const Inicia_nested_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_Inicia_nested\"),\nchoices: jsPsych.timelineVariable(\"choices_Inicia_nested\"),\n      data: {\n        rt: \"rt_Inicia_nested\",\nresponse: \"response_Inicia_nested\",\nstimulus: \"stimulus_Inicia_nested\",\n        trial_id: 1762902912364,\n        isInLoop: true,\n        \n        branches: [1762907671377, 1762912004181],\n        branchConditions: [[{\"id\":1762912351921,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762907671377\",\"customParameters\":{}},{\"id\":1762912364305,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"1762912004181\",\"customParameters\":{}}]] \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762907705296_BranchCustomParameters !== 'undefined' && loop_loop_1762907705296_BranchCustomParameters && typeof loop_loop_1762907705296_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762907705296_BranchCustomParameters);\n        Object.entries(loop_loop_1762907705296_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762907705296_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Evaluar condiciones del trial para branching interno del loop\n      const branches = [1762907671377, 1762912004181];\n      const branchConditions = [{\"id\":1762912351921,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762907671377\",\"customParameters\":{}},{\"id\":1762912364305,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"1762912004181\",\"customParameters\":{}}].flat();\n      \n      let nextTrialId = null;\n      let matchedCustomParameters = null;\n      \n      // Evaluar cada condición (lógica OR entre condiciones)\n      for (const condition of branchConditions) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch) {\n          nextTrialId = condition.nextTrialId;\n          // Store custom parameters if they exist\n          if (condition.customParameters) {\n            matchedCustomParameters = condition.customParameters;\n            console.log('Loop branching: matched custom parameters:', matchedCustomParameters);\n          }\n          break;\n        }\n      }\n      \n      // Si se encontró match, activar branching\n      if (nextTrialId) {\n        loop_loop_1762907705296_NextTrialId = nextTrialId;\n        loop_loop_1762907705296_SkipRemaining = true;\n        loop_loop_1762907705296_BranchingActive = true;\n        // Store custom parameters for the next trial in the loop\n        if (matchedCustomParameters) {\n          loop_loop_1762907705296_BranchCustomParameters = matchedCustomParameters;\n        }\n      }\n    },};\n\n\n\n    \n    const preloadFinal_nested = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadFinal_nested);\n    \n    const Final_nested_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_Final_nested\"),\nchoices: jsPsych.timelineVariable(\"choices_Final_nested\"),\n      data: {\n        rt: \"rt_Final_nested\",\nresponse: \"response_Final_nested\",\nstimulus: \"stimulus_Final_nested\",\n        trial_id: 1762907671377,\n        isInLoop: true,\n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762907705296_BranchCustomParameters !== 'undefined' && loop_loop_1762907705296_BranchCustomParameters && typeof loop_loop_1762907705296_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762907705296_BranchCustomParameters);\n        Object.entries(loop_loop_1762907705296_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762907705296_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Este trial no tiene branches ni repeat conditions, verificar si el loop padre tiene branches\n      if (typeof loop_loop_1762907705296_HasBranches !== 'undefined' && loop_loop_1762907705296_HasBranches) {\n        // El loop tiene branches, activar branching del loop al terminar\n        // Esto se manejará en el on_finish del loop\n        loop_loop_1762907705296_ShouldBranchOnFinish = true;\n      } else if (!loop_loop_1762907705296_HasBranches) {\n        // Ni el trial ni el loop tienen branches - trial terminal\n        // Si llegamos aquí después de un branching global, terminar el experimento\n        if (window.branchingActive) {\n          jsPsych.abortExperiment('', {});\n        }\n      }\n    },};\n\n\n\n    \n    const preloadotravez = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadotravez);\n    \n    const otravez_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_otravez\"),\nchoices: jsPsych.timelineVariable(\"choices_otravez\"),\n      data: {\n        rt: \"rt_otravez\",\nresponse: \"response_otravez\",\nstimulus: \"stimulus_otravez\",\n        trial_id: 1762912004181,\n        isInLoop: true,\n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762907705296_BranchCustomParameters !== 'undefined' && loop_loop_1762907705296_BranchCustomParameters && typeof loop_loop_1762907705296_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762907705296_BranchCustomParameters);\n        Object.entries(loop_loop_1762907705296_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762907705296_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Este trial no tiene branches ni repeat conditions, verificar si el loop padre tiene branches\n      if (typeof loop_loop_1762907705296_HasBranches !== 'undefined' && loop_loop_1762907705296_HasBranches) {\n        // El loop tiene branches, activar branching del loop al terminar\n        // Esto se manejará en el on_finish del loop\n        loop_loop_1762907705296_ShouldBranchOnFinish = true;\n      } else if (!loop_loop_1762907705296_HasBranches) {\n        // Ni el trial ni el loop tienen branches - trial terminal\n        // Si llegamos aquí después de un branching global, terminar el experimento\n        if (window.branchingActive) {\n          jsPsych.abortExperiment('', {});\n        }\n      }\n    },};\n\n\n// --- Branching logic variables for loop loop_1762907705296 ---\nlet loop_loop_1762907705296_NextTrialId = null;\nlet loop_loop_1762907705296_SkipRemaining = false;\nlet loop_loop_1762907705296_BranchingActive = false;\nlet loop_loop_1762907705296_BranchCustomParameters = null; // Store custom parameters for branching within loops\nlet loop_loop_1762907705296_TargetExecuted = false; // Indica si el trial objetivo ya se ejecutó en esta iteración\nlet loop_loop_1762907705296_IterationComplete = false; // Indica que la iteración actual terminó\nconst loop_loop_1762907705296_HasBranches = false;\nlet loop_loop_1762907705296_ShouldBranchOnFinish = false;\n\n\n    const Inicia_nested_wrapper = {\n      timeline: [Inicia_nested_timeline],\n      conditional_function: function() {\n        const currentId = Inicia_nested_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762907705296_TargetExecuted) {\n          \n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762907705296_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762907705296_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762907705296_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n      }\n    };\n\n\n    const Final_nested_wrapper = {\n      timeline: [Final_nested_timeline],\n      conditional_function: function() {\n        const currentId = Final_nested_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762907705296_TargetExecuted) {\n          \n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762907705296_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762907705296_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762907705296_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n      }\n    };\n\n\n    const otravez_wrapper = {\n      timeline: [otravez_timeline],\n      conditional_function: function() {\n        const currentId = otravez_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762907705296_TargetExecuted) {\n          \n          // Último item: resetear flags para la siguiente iteración/repetición\n          loop_loop_1762907705296_NextTrialId = null;\n          loop_loop_1762907705296_SkipRemaining = false;\n          loop_loop_1762907705296_TargetExecuted = false;\n          loop_loop_1762907705296_BranchingActive = false;\n          loop_loop_1762907705296_BranchCustomParameters = null;\n          loop_loop_1762907705296_IterationComplete = false;\n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762907705296_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762907705296_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762907705296_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n        // Último item del timeline: resetear flags para la siguiente iteración/repetición\n        loop_loop_1762907705296_NextTrialId = null;\n        loop_loop_1762907705296_SkipRemaining = false;\n        loop_loop_1762907705296_TargetExecuted = false;\n        loop_loop_1762907705296_BranchingActive = false;\n        loop_loop_1762907705296_BranchCustomParameters = null;\n        loop_loop_1762907705296_IterationComplete = false;\n      }\n    };\n\nconst evaluateLoopCondition = (trialData, condition) => {\n  // All rules in a condition must be true (AND logic)\n  return condition.rules.every(rule => {\n    const propValue = trialData[rule.prop];\n    const compareValue = rule.value;\n    \n    // Convert values for comparison\n    const numPropValue = parseFloat(propValue);\n    const numCompareValue = parseFloat(compareValue);\n    const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n    \n    switch (rule.op) {\n      case '==':\n        return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n      case '!=':\n        return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n      case '>':\n        return isNumeric && numPropValue > numCompareValue;\n      case '<':\n        return isNumeric && numPropValue < numCompareValue;\n      case '>=':\n        return isNumeric && numPropValue >= numCompareValue;\n      case '<=':\n        return isNumeric && numPropValue <= numCompareValue;\n      default:\n        return false;\n    }\n  });\n};\n\nconst getNextLoopTrialId = (lastTrialData) => {\n  if (!lastTrialData || !lastTrialData.trials || !lastTrialData.trials[0]) {\n    return null;\n  }\n  \n  const trial = lastTrialData.trials[0];\n  \n  // Check if trial has branches\n  if (!Array.isArray(trial.branches) || trial.branches.length === 0) {\n    return null;\n  }\n  \n  // Si solo hay un branch O no hay condiciones, seguir al primer branch automáticamente\n  const hasMultipleBranches = trial.branches.length > 1;\n  const hasBranchConditions = Array.isArray(trial.branchConditions) && trial.branchConditions.length > 0;\n  \n  if (!hasMultipleBranches || !hasBranchConditions) {\n    console.log('Loop internal: Auto-branching to first branch:', trial.branches[0]);\n    return trial.branches[0];\n  }\n  \n  // Si hay múltiples branches Y condiciones, evaluar las condiciones\n  const conditions = trial.branchConditions.flat();\n  \n  // Evaluate each condition (OR logic between conditions)\n  for (const condition of conditions) {\n    if (!condition || !condition.rules) {\n      console.warn('Invalid condition structure:', condition);\n      continue;\n    }\n    \n    if (evaluateLoopCondition(trial, condition)) {\n      console.log('Loop internal: Condition matched:', condition);\n      return condition.nextTrialId;\n    }\n  }\n  \n  // No condition matched - seguir al primer branch por defecto\n  console.log('Loop internal: No condition matched, defaulting to first branch:', trial.branches[0]);\n  return trial.branches[0];\n};\n\nconst loop_1762907705296_procedure = {\n  timeline: [Inicia_nested_wrapper, Final_nested_wrapper, otravez_wrapper],\n  timeline_variables: test_stimuli_loop_1762907705296,\n  repetitions: 1,\n  randomize_order: false,\n  loop_function: function(data) {\n    // Evaluate loop conditions to determine if the loop should repeat\n    const loopConditionsArray = [{\"id\":1762912141687,\"rules\":[{\"trialId\":\"1762912004181\",\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}]}];\n    \n    // Helper function to get data from a specific trial\n    const getTrialData = (trialId) => {\n      // Get all trials data\n      const allTrials = data.values();\n      \n      // Find the last occurrence of the trial with matching trial_id\n      for (let i = allTrials.length - 1; i >= 0; i--) {\n        const trial = allTrials[i];\n        if (String(trial.trial_id) === String(trialId)) {\n          return trial;\n        }\n      }\n      return null;\n    };\n    \n    // Evaluate a single condition (AND logic between rules)\n    const evaluateCondition = (condition) => {\n      return condition.rules.every(rule => {\n        const trialData = getTrialData(rule.trialId);\n        \n        if (!trialData) {\n          console.warn('Trial data not found for:', rule.trialId);\n          return false;\n        }\n        \n        const propValue = trialData[rule.prop];\n        const compareValue = rule.value;\n        \n        // Convert values for comparison\n        const numPropValue = parseFloat(propValue);\n        const numCompareValue = parseFloat(compareValue);\n        const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n        \n        switch (rule.op) {\n          case '==':\n            return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n          case '!=':\n            return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n          case '>':\n            return isNumeric && numPropValue > numCompareValue;\n          case '<':\n            return isNumeric && numPropValue < numCompareValue;\n          case '>=':\n            return isNumeric && numPropValue >= numCompareValue;\n          case '<=':\n            return isNumeric && numPropValue <= numCompareValue;\n          default:\n            return false;\n        }\n      });\n    };\n    \n    // Evaluate all conditions (OR logic between conditions)\n    const shouldRepeat = loopConditionsArray.some(condition => evaluateCondition(condition));\n    \n    console.log('Loop condition evaluation result:', shouldRepeat);\n    return shouldRepeat;\n  },\n  conditional_function: function() {\n    const currentId = \"loop_1762907705296\";\n    \n    // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n    const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n    if (jumpToTrial) {\n      if (String(currentId) === String(jumpToTrial)) {\n        // Encontramos el loop objetivo para repeat/jump\n        console.log('Repeat/jump: Found target loop', currentId);\n        localStorage.removeItem('jsPsych_jumpToTrial');\n        return true;\n      }\n      // No es el objetivo, saltar\n      console.log('Repeat/jump: Skipping loop', currentId);\n      return false;\n    }\n    \n    // Si skipRemaining está activo (branching normal), verificar si este es el loop objetivo\n    if (window.skipRemaining) {\n      if (String(currentId) === String(window.nextTrialId)) {\n        // Encontramos el loop objetivo\n        window.skipRemaining = false;\n        window.nextTrialId = null;\n        return true;\n      }\n      // No es el objetivo, saltar\n      return false;\n    }\n    \n    return true;\n  },\n  on_timeline_start: function() {\n    // Resetear las flags al inicio de cada iteración del loop\n    // Esto permite que cada repetición del loop funcione correctamente\n    loop_loop_1762907705296_NextTrialId = null;\n    loop_loop_1762907705296_SkipRemaining = false;\n    loop_loop_1762907705296_BranchingActive = false;\n    loop_loop_1762907705296_BranchCustomParameters = null;\n    loop_loop_1762907705296_TargetExecuted = false;\n    loop_loop_1762907705296_IterationComplete = false;\n    loop_loop_1762907705296_ShouldBranchOnFinish = false;\n    \n    // IMPORTANTE: Si el loop es condicional, resetear también el branching GLOBAL\n    // para que se regenere durante esta iteración del loop\n    \n    window.nextTrialId = null;\n    window.skipRemaining = false;\n    window.branchingActive = false;\n    window.branchCustomParameters = null;\n    console.log('Conditional loop iteration starting, reset global branching flags');\n    \n  },\n  on_timeline_finish: function() {\n    // Resetear las flags al finalizar todas las repeticiones del loop\n    loop_loop_1762907705296_NextTrialId = null;\n    loop_loop_1762907705296_SkipRemaining = false;\n    loop_loop_1762907705296_TargetExecuted = false;\n    loop_loop_1762907705296_BranchingActive = false;\n    loop_loop_1762907705296_BranchCustomParameters = null;\n    \n    // Verificar si se debe hacer branching porque un trial sin branches se completó\n    // pero el loop tiene branches\n    if (loop_loop_1762907705296_ShouldBranchOnFinish && loop_loop_1762907705296_HasBranches) {\n      const branches = [];\n      if (branches.length > 0) {\n        window.nextTrialId = branches[0];\n        window.skipRemaining = true;\n        window.branchingActive = true;\n        console.log('Loop finished (from internal trial), branching to:', branches[0]);\n      }\n    }\n    \n    // Resetear todas las variables de branching del loop\n    loop_loop_1762907705296_NextTrialId = null;\n    loop_loop_1762907705296_SkipRemaining = false;\n    loop_loop_1762907705296_BranchingActive = false;\n    loop_loop_1762907705296_BranchCustomParameters = null;\n    loop_loop_1762907705296_ShouldBranchOnFinish = false;\n  },\n\n  data: {\n    loop_id: \"loop_1762907705296\"\n  },\n  on_finish: function(data) {\n    // Este loop no tiene branches ni repeat conditions, es un loop terminal\n    // Si llegamos aquí después de un branching, terminar el experimento\n    if (window.branchingActive) {\n      jsPsych.abortExperiment('', {});\n    }\n  },\n};\ntimeline.push(loop_1762907705296_procedure);\n",
                "isConditionalLoop": true,
                "loopConditions": [
                  {
                    "id": 1762912141687,
                    "rules": [
                      {
                        "trialId": "1762912004181",
                        "prop": "response",
                        "op": "==",
                        "value": "0"
                      }
                    ]
                  }
                ],
                "csvJson": [],
                "csvColumns": []
              }
            ],
            "code": "\n\n    const test_stimuli_loop_1762902533581 = [\n  {\n    \"stimulus_nested\": \"<div id=\\\"ig2k\\\" style=\\\"box-sizing: border-box;\\\">Nested ?</div>\",\n    \"choices_nested\": [\n      \"Seguir\",\n      \"Salirn\"\n    ],\n    \"stimulus_Seguir\": \"<div id=\\\"ip4y\\\" style=\\\"box-sizing: border-box;\\\">Seguir</div>\",\n    \"choices_Seguir\": [\n      \"SI\",\n      \"No\"\n    ]\n  }\n];\n    \n    \n    \n    const preloadnested = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadnested);\n    \n    const nested_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_nested\"),\nchoices: jsPsych.timelineVariable(\"choices_nested\"),\n      data: {\n        rt: \"rt_nested\",\nresponse: \"response_nested\",\nstimulus: \"stimulus_nested\",\n        trial_id: 1762902524841,\n        isInLoop: true,\n        \n        branches: [1762902528773, 1762902912364],\n        branchConditions: [[{\"id\":1762902986815,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762902528773\",\"customParameters\":{}},{\"id\":1762902993518,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"loop_1762907705296\",\"customParameters\":{}}]] \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762902533581_BranchCustomParameters !== 'undefined' && loop_loop_1762902533581_BranchCustomParameters && typeof loop_loop_1762902533581_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762902533581_BranchCustomParameters);\n        Object.entries(loop_loop_1762902533581_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762902533581_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Evaluar condiciones del trial para branching interno del loop\n      const branches = [1762902528773, 1762902912364];\n      const branchConditions = [{\"id\":1762902986815,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762902528773\",\"customParameters\":{}},{\"id\":1762902993518,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"loop_1762907705296\",\"customParameters\":{}}].flat();\n      \n      let nextTrialId = null;\n      let matchedCustomParameters = null;\n      \n      // Evaluar cada condición (lógica OR entre condiciones)\n      for (const condition of branchConditions) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch) {\n          nextTrialId = condition.nextTrialId;\n          // Store custom parameters if they exist\n          if (condition.customParameters) {\n            matchedCustomParameters = condition.customParameters;\n            console.log('Loop branching: matched custom parameters:', matchedCustomParameters);\n          }\n          break;\n        }\n      }\n      \n      // Si se encontró match, activar branching\n      if (nextTrialId) {\n        loop_loop_1762902533581_NextTrialId = nextTrialId;\n        loop_loop_1762902533581_SkipRemaining = true;\n        loop_loop_1762902533581_BranchingActive = true;\n        // Store custom parameters for the next trial in the loop\n        if (matchedCustomParameters) {\n          loop_loop_1762902533581_BranchCustomParameters = matchedCustomParameters;\n        }\n      }\n    },};\n\n\n\n    \n    const preloadSeguir = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadSeguir);\n    \n    const Seguir_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_Seguir\"),\nchoices: jsPsych.timelineVariable(\"choices_Seguir\"),\n      data: {\n        rt: \"rt_Seguir\",\nresponse: \"response_Seguir\",\nstimulus: \"stimulus_Seguir\",\n        trial_id: 1762902528773,\n        isInLoop: true,\n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762902533581_BranchCustomParameters !== 'undefined' && loop_loop_1762902533581_BranchCustomParameters && typeof loop_loop_1762902533581_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762902533581_BranchCustomParameters);\n        Object.entries(loop_loop_1762902533581_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762902533581_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Evaluar repeat conditions (para reiniciar el experimento desde un trial específico)\n      const repeatConditionsArray = [{\"id\":1762903488868,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"jumpToTrialId\":\"1762902515317\"}];\n      \n      let shouldRepeat = false;\n      for (const condition of repeatConditionsArray) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch && condition.jumpToTrialId) {\n          console.log('Repeat condition matched in loop! Jumping to trial:', condition.jumpToTrialId);\n          // Guardar el trial objetivo en localStorage\n          localStorage.setItem('jsPsych_jumpToTrial', String(condition.jumpToTrialId));\n          shouldRepeat = true;\n          break;\n        }\n      }\n      \n      if (shouldRepeat) {\n        // Limpiar el contenedor de jsPsych (jspsych-container es el display_element)\n        const container = document.getElementById('jspsych-container');\n        if (container) {\n          // Limpiar todo el contenido del container\n          container.innerHTML = '';\n        }\n        // Reiniciar el timeline\n        setTimeout(() => {\n          jsPsych.run(timeline);\n        }, 100);\n        return;\n      }\n      \n      \n      // Este trial no tiene branches, verificar si el loop padre tiene branches\n      if (typeof loop_loop_1762902533581_HasBranches !== 'undefined' && loop_loop_1762902533581_HasBranches) {\n        // El loop tiene branches, activar branching del loop al terminar\n        // Esto se manejará en el on_finish del loop\n        loop_loop_1762902533581_ShouldBranchOnFinish = true;\n      } else if (!loop_loop_1762902533581_HasBranches) {\n        // Ni el trial ni el loop tienen branches - trial terminal\n        // Si llegamos aquí después de un branching global, terminar el experimento\n        if (window.branchingActive) {\n          jsPsych.abortExperiment('', {});\n        }\n      }\n      \n    },};\n\n\n\n\n    const test_stimuli_loop_1762907705296 = [\n  {\n    \"stimulus_Inicia_nested\": \"<div id=\\\"ip91\\\" style=\\\"box-sizing: border-box;\\\">inicia nested</div>\",\n    \"choices_Inicia_nested\": [\n      \"Si\",\n      \"Nos\"\n    ],\n    \"stimulus_Final_nested\": \"<div id=\\\"isjo\\\" style=\\\"box-sizing: border-box;\\\">final nested</div>\",\n    \"choices_Final_nested\": [\n      \"Repetir\",\n      \"Salirs\"\n    ],\n    \"stimulus_otravez\": \"<div id=\\\"imna\\\" style=\\\"box-sizing: border-box;\\\">otra vez</div>\",\n    \"choices_otravez\": [\n      \"Dije que no\"\n    ]\n  }\n];\n    \n    \n    \n    const preloadInicia_nested = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadInicia_nested);\n    \n    const Inicia_nested_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_Inicia_nested\"),\nchoices: jsPsych.timelineVariable(\"choices_Inicia_nested\"),\n      data: {\n        rt: \"rt_Inicia_nested\",\nresponse: \"response_Inicia_nested\",\nstimulus: \"stimulus_Inicia_nested\",\n        trial_id: 1762902912364,\n        isInLoop: true,\n        \n        branches: [1762907671377, 1762912004181],\n        branchConditions: [[{\"id\":1762912351921,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762907671377\",\"customParameters\":{}},{\"id\":1762912364305,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"1762912004181\",\"customParameters\":{}}]] \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762907705296_BranchCustomParameters !== 'undefined' && loop_loop_1762907705296_BranchCustomParameters && typeof loop_loop_1762907705296_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762907705296_BranchCustomParameters);\n        Object.entries(loop_loop_1762907705296_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762907705296_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Evaluar condiciones del trial para branching interno del loop\n      const branches = [1762907671377, 1762912004181];\n      const branchConditions = [{\"id\":1762912351921,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762907671377\",\"customParameters\":{}},{\"id\":1762912364305,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"1762912004181\",\"customParameters\":{}}].flat();\n      \n      let nextTrialId = null;\n      let matchedCustomParameters = null;\n      \n      // Evaluar cada condición (lógica OR entre condiciones)\n      for (const condition of branchConditions) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch) {\n          nextTrialId = condition.nextTrialId;\n          // Store custom parameters if they exist\n          if (condition.customParameters) {\n            matchedCustomParameters = condition.customParameters;\n            console.log('Loop branching: matched custom parameters:', matchedCustomParameters);\n          }\n          break;\n        }\n      }\n      \n      // Si se encontró match, activar branching\n      if (nextTrialId) {\n        loop_loop_1762907705296_NextTrialId = nextTrialId;\n        loop_loop_1762907705296_SkipRemaining = true;\n        loop_loop_1762907705296_BranchingActive = true;\n        // Store custom parameters for the next trial in the loop\n        if (matchedCustomParameters) {\n          loop_loop_1762907705296_BranchCustomParameters = matchedCustomParameters;\n        }\n      }\n    },};\n\n\n\n    \n    const preloadFinal_nested = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadFinal_nested);\n    \n    const Final_nested_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_Final_nested\"),\nchoices: jsPsych.timelineVariable(\"choices_Final_nested\"),\n      data: {\n        rt: \"rt_Final_nested\",\nresponse: \"response_Final_nested\",\nstimulus: \"stimulus_Final_nested\",\n        trial_id: 1762907671377,\n        isInLoop: true,\n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762907705296_BranchCustomParameters !== 'undefined' && loop_loop_1762907705296_BranchCustomParameters && typeof loop_loop_1762907705296_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762907705296_BranchCustomParameters);\n        Object.entries(loop_loop_1762907705296_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762907705296_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Este trial no tiene branches ni repeat conditions, verificar si el loop padre tiene branches\n      if (typeof loop_loop_1762907705296_HasBranches !== 'undefined' && loop_loop_1762907705296_HasBranches) {\n        // El loop tiene branches, activar branching del loop al terminar\n        // Esto se manejará en el on_finish del loop\n        loop_loop_1762907705296_ShouldBranchOnFinish = true;\n      } else if (!loop_loop_1762907705296_HasBranches) {\n        // Ni el trial ni el loop tienen branches - trial terminal\n        // Si llegamos aquí después de un branching global, terminar el experimento\n        if (window.branchingActive) {\n          jsPsych.abortExperiment('', {});\n        }\n      }\n    },};\n\n\n\n    \n    const preloadotravez = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadotravez);\n    \n    const otravez_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_otravez\"),\nchoices: jsPsych.timelineVariable(\"choices_otravez\"),\n      data: {\n        rt: \"rt_otravez\",\nresponse: \"response_otravez\",\nstimulus: \"stimulus_otravez\",\n        trial_id: 1762912004181,\n        isInLoop: true,\n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762907705296_BranchCustomParameters !== 'undefined' && loop_loop_1762907705296_BranchCustomParameters && typeof loop_loop_1762907705296_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762907705296_BranchCustomParameters);\n        Object.entries(loop_loop_1762907705296_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762907705296_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Este trial no tiene branches ni repeat conditions, verificar si el loop padre tiene branches\n      if (typeof loop_loop_1762907705296_HasBranches !== 'undefined' && loop_loop_1762907705296_HasBranches) {\n        // El loop tiene branches, activar branching del loop al terminar\n        // Esto se manejará en el on_finish del loop\n        loop_loop_1762907705296_ShouldBranchOnFinish = true;\n      } else if (!loop_loop_1762907705296_HasBranches) {\n        // Ni el trial ni el loop tienen branches - trial terminal\n        // Si llegamos aquí después de un branching global, terminar el experimento\n        if (window.branchingActive) {\n          jsPsych.abortExperiment('', {});\n        }\n      }\n    },};\n\n\n// --- Branching logic variables for loop loop_1762907705296 ---\nlet loop_loop_1762907705296_NextTrialId = null;\nlet loop_loop_1762907705296_SkipRemaining = false;\nlet loop_loop_1762907705296_BranchingActive = false;\nlet loop_loop_1762907705296_BranchCustomParameters = null; // Store custom parameters for branching within loops\nlet loop_loop_1762907705296_TargetExecuted = false; // Indica si el trial objetivo ya se ejecutó en esta iteración\nlet loop_loop_1762907705296_IterationComplete = false; // Indica que la iteración actual terminó\nconst loop_loop_1762907705296_HasBranches = false;\nlet loop_loop_1762907705296_ShouldBranchOnFinish = false;\n\n\n    const Inicia_nested_wrapper = {\n      timeline: [Inicia_nested_timeline],\n      conditional_function: function() {\n        const currentId = Inicia_nested_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762907705296_TargetExecuted) {\n          \n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762907705296_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762907705296_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762907705296_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n      }\n    };\n\n\n    const Final_nested_wrapper = {\n      timeline: [Final_nested_timeline],\n      conditional_function: function() {\n        const currentId = Final_nested_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762907705296_TargetExecuted) {\n          \n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762907705296_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762907705296_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762907705296_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n      }\n    };\n\n\n    const otravez_wrapper = {\n      timeline: [otravez_timeline],\n      conditional_function: function() {\n        const currentId = otravez_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762907705296_TargetExecuted) {\n          \n          // Último item: resetear flags para la siguiente iteración/repetición\n          loop_loop_1762907705296_NextTrialId = null;\n          loop_loop_1762907705296_SkipRemaining = false;\n          loop_loop_1762907705296_TargetExecuted = false;\n          loop_loop_1762907705296_BranchingActive = false;\n          loop_loop_1762907705296_BranchCustomParameters = null;\n          loop_loop_1762907705296_IterationComplete = false;\n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762907705296_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762907705296_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762907705296_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n        // Último item del timeline: resetear flags para la siguiente iteración/repetición\n        loop_loop_1762907705296_NextTrialId = null;\n        loop_loop_1762907705296_SkipRemaining = false;\n        loop_loop_1762907705296_TargetExecuted = false;\n        loop_loop_1762907705296_BranchingActive = false;\n        loop_loop_1762907705296_BranchCustomParameters = null;\n        loop_loop_1762907705296_IterationComplete = false;\n      }\n    };\n\nconst evaluateLoopCondition_loop_1762907705296 = (trialData, condition) => {\n  // All rules in a condition must be true (AND logic)\n  return condition.rules.every(rule => {\n    const propValue = trialData[rule.prop];\n    const compareValue = rule.value;\n    \n    // Convert values for comparison\n    const numPropValue = parseFloat(propValue);\n    const numCompareValue = parseFloat(compareValue);\n    const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n    \n    switch (rule.op) {\n      case '==':\n        return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n      case '!=':\n        return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n      case '>':\n        return isNumeric && numPropValue > numCompareValue;\n      case '<':\n        return isNumeric && numPropValue < numCompareValue;\n      case '>=':\n        return isNumeric && numPropValue >= numCompareValue;\n      case '<=':\n        return isNumeric && numPropValue <= numCompareValue;\n      default:\n        return false;\n    }\n  });\n};\n\nconst getNextLoopTrialId_loop_1762907705296 = (lastTrialData) => {\n  if (!lastTrialData || !lastTrialData.trials || !lastTrialData.trials[0]) {\n    return null;\n  }\n  \n  const trial = lastTrialData.trials[0];\n  \n  // Check if trial has branches\n  if (!Array.isArray(trial.branches) || trial.branches.length === 0) {\n    return null;\n  }\n  \n  // Si solo hay un branch O no hay condiciones, seguir al primer branch automáticamente\n  const hasMultipleBranches = trial.branches.length > 1;\n  const hasBranchConditions = Array.isArray(trial.branchConditions) && trial.branchConditions.length > 0;\n  \n  if (!hasMultipleBranches || !hasBranchConditions) {\n    console.log('Loop internal: Auto-branching to first branch:', trial.branches[0]);\n    return trial.branches[0];\n  }\n  \n  // Si hay múltiples branches Y condiciones, evaluar las condiciones\n  const conditions = trial.branchConditions.flat();\n  \n  // Evaluate each condition (OR logic between conditions)\n  for (const condition of conditions) {\n    if (!condition || !condition.rules) {\n      console.warn('Invalid condition structure:', condition);\n      continue;\n    }\n    \n    if (evaluateLoopCondition_loop_1762907705296(trial, condition)) {\n      console.log('Loop internal: Condition matched:', condition);\n      return condition.nextTrialId;\n    }\n  }\n  \n  // No condition matched - seguir al primer branch por defecto\n  console.log('Loop internal: No condition matched, defaulting to first branch:', trial.branches[0]);\n  return trial.branches[0];\n};\n\nconst loop_1762907705296_procedure = {\n  timeline: [Inicia_nested_wrapper, Final_nested_wrapper, otravez_wrapper],\n  timeline_variables: test_stimuli_loop_1762907705296,\n  repetitions: 1,\n  randomize_order: false,\n  loop_function: function(data) {\n    // Evaluate loop conditions to determine if the loop should repeat\n    const loopConditionsArray = [{\"id\":1762912141687,\"rules\":[{\"trialId\":\"1762912004181\",\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}]}];\n    \n    // Helper function to get data from a specific trial\n    const getTrialData = (trialId) => {\n      // Get all trials data\n      const allTrials = data.values();\n      \n      // Find the last occurrence of the trial with matching trial_id\n      for (let i = allTrials.length - 1; i >= 0; i--) {\n        const trial = allTrials[i];\n        if (String(trial.trial_id) === String(trialId)) {\n          return trial;\n        }\n      }\n      return null;\n    };\n    \n    // Evaluate a single condition (AND logic between rules)\n    const evaluateCondition = (condition) => {\n      return condition.rules.every(rule => {\n        const trialData = getTrialData(rule.trialId);\n        \n        if (!trialData) {\n          console.warn('Trial data not found for:', rule.trialId);\n          return false;\n        }\n        \n        const propValue = trialData[rule.prop];\n        const compareValue = rule.value;\n        \n        // Convert values for comparison\n        const numPropValue = parseFloat(propValue);\n        const numCompareValue = parseFloat(compareValue);\n        const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n        \n        switch (rule.op) {\n          case '==':\n            return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n          case '!=':\n            return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n          case '>':\n            return isNumeric && numPropValue > numCompareValue;\n          case '<':\n            return isNumeric && numPropValue < numCompareValue;\n          case '>=':\n            return isNumeric && numPropValue >= numCompareValue;\n          case '<=':\n            return isNumeric && numPropValue <= numCompareValue;\n          default:\n            return false;\n        }\n      });\n    };\n    \n    // Evaluate all conditions (OR logic between conditions)\n    const shouldRepeat = loopConditionsArray.some(condition => evaluateCondition(condition));\n    \n    console.log('Loop condition evaluation result:', shouldRepeat);\n    return shouldRepeat;\n  },\n  conditional_function: function() {\n    const currentId = \"loop_1762907705296\";\n    \n    // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n    const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n    if (jumpToTrial) {\n      if (String(currentId) === String(jumpToTrial)) {\n        // Encontramos el loop objetivo para repeat/jump\n        console.log('Repeat/jump: Found target loop', currentId);\n        localStorage.removeItem('jsPsych_jumpToTrial');\n        return true;\n      }\n      // No es el objetivo, saltar\n      console.log('Repeat/jump: Skipping loop', currentId);\n      return false;\n    }\n    \n    // Si skipRemaining está activo (branching normal), verificar si este es el loop objetivo\n    if (window.skipRemaining) {\n      if (String(currentId) === String(window.nextTrialId)) {\n        // Encontramos el loop objetivo\n        window.skipRemaining = false;\n        window.nextTrialId = null;\n        return true;\n      }\n      // No es el objetivo, saltar\n      return false;\n    }\n    \n    return true;\n  },\n  on_timeline_start: function() {\n    // Resetear las flags al inicio de cada iteración del loop\n    // Esto permite que cada repetición del loop funcione correctamente\n    loop_loop_1762907705296_NextTrialId = null;\n    loop_loop_1762907705296_SkipRemaining = false;\n    loop_loop_1762907705296_BranchingActive = false;\n    loop_loop_1762907705296_BranchCustomParameters = null;\n    loop_loop_1762907705296_TargetExecuted = false;\n    loop_loop_1762907705296_IterationComplete = false;\n    loop_loop_1762907705296_ShouldBranchOnFinish = false;\n    \n    // IMPORTANTE: Si el loop es condicional, resetear también el branching GLOBAL\n    // para que se regenere durante esta iteración del loop\n    \n    window.nextTrialId = null;\n    window.skipRemaining = false;\n    window.branchingActive = false;\n    window.branchCustomParameters = null;\n    console.log('Conditional loop iteration starting, reset global branching flags');\n    \n  },\n  on_timeline_finish: function() {\n    // Resetear las flags al finalizar todas las repeticiones del loop\n    loop_loop_1762907705296_NextTrialId = null;\n    loop_loop_1762907705296_SkipRemaining = false;\n    loop_loop_1762907705296_TargetExecuted = false;\n    loop_loop_1762907705296_BranchingActive = false;\n    loop_loop_1762907705296_BranchCustomParameters = null;\n    \n    // Verificar si se debe hacer branching porque un trial sin branches se completó\n    // pero el loop tiene branches\n    if (loop_loop_1762907705296_ShouldBranchOnFinish && loop_loop_1762907705296_HasBranches) {\n      const branches = [];\n      if (branches.length > 0) {\n        \n        // Este es un nested loop - activar branching del loop padre\n        loop_loop_1762902533581_NextTrialId = branches[0];\n        loop_loop_1762902533581_SkipRemaining = true;\n        loop_loop_1762902533581_BranchingActive = true;\n        console.log('Nested loop finished (from internal trial), activating parent loop branching to:', branches[0]);\n      }\n    }\n    \n    // Resetear todas las variables de branching del loop\n    loop_loop_1762907705296_NextTrialId = null;\n    loop_loop_1762907705296_SkipRemaining = false;\n    loop_loop_1762907705296_BranchingActive = false;\n    loop_loop_1762907705296_BranchCustomParameters = null;\n    loop_loop_1762907705296_ShouldBranchOnFinish = false;\n  },\n\n  data: {\n    loop_id: \"loop_1762907705296\"\n  },\n  on_finish: function(data) {\n    // Este loop no tiene branches ni repeat conditions, es un loop terminal\n    // Si llegamos aquí después de un branching, terminar el experimento\n    if (window.branchingActive) {\n      jsPsych.abortExperiment('', {});\n    }\n  },\n};\ntimeline.push(loop_1762907705296_procedure);\n\n\n// --- Branching logic variables for loop loop_1762902533581 ---\nlet loop_loop_1762902533581_NextTrialId = null;\nlet loop_loop_1762902533581_SkipRemaining = false;\nlet loop_loop_1762902533581_BranchingActive = false;\nlet loop_loop_1762902533581_BranchCustomParameters = null; // Store custom parameters for branching within loops\nlet loop_loop_1762902533581_TargetExecuted = false; // Indica si el trial objetivo ya se ejecutó en esta iteración\nlet loop_loop_1762902533581_IterationComplete = false; // Indica que la iteración actual terminó\nconst loop_loop_1762902533581_HasBranches = true;\nlet loop_loop_1762902533581_ShouldBranchOnFinish = false;\n\n\n    const nested_wrapper = {\n      timeline: [nested_timeline],\n      conditional_function: function() {\n        const currentId = nested_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762902533581_TargetExecuted) {\n          \n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762902533581_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762902533581_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762902533581_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n      }\n    };\n\n\n    const Seguir_wrapper = {\n      timeline: [Seguir_timeline],\n      conditional_function: function() {\n        const currentId = Seguir_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762902533581_TargetExecuted) {\n          \n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762902533581_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762902533581_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762902533581_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n      }\n    };\n\n\n    const Nested_Loop_1_wrapper = {\n      timeline: [loop_1762907705296_procedure],\n      conditional_function: function() {\n        const currentId = \"loop_1762907705296\";\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762902533581_TargetExecuted) {\n          \n          // Último item: resetear flags para la siguiente iteración/repetición\n          loop_loop_1762902533581_NextTrialId = null;\n          loop_loop_1762902533581_SkipRemaining = false;\n          loop_loop_1762902533581_TargetExecuted = false;\n          loop_loop_1762902533581_BranchingActive = false;\n          loop_loop_1762902533581_BranchCustomParameters = null;\n          loop_loop_1762902533581_IterationComplete = false;\n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762902533581_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762902533581_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762902533581_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n        // Último item del timeline: resetear flags para la siguiente iteración/repetición\n        loop_loop_1762902533581_NextTrialId = null;\n        loop_loop_1762902533581_SkipRemaining = false;\n        loop_loop_1762902533581_TargetExecuted = false;\n        loop_loop_1762902533581_BranchingActive = false;\n        loop_loop_1762902533581_BranchCustomParameters = null;\n        loop_loop_1762902533581_IterationComplete = false;\n      }\n    };\n\nconst evaluateLoopCondition_loop_1762902533581 = (trialData, condition) => {\n  // All rules in a condition must be true (AND logic)\n  return condition.rules.every(rule => {\n    const propValue = trialData[rule.prop];\n    const compareValue = rule.value;\n    \n    // Convert values for comparison\n    const numPropValue = parseFloat(propValue);\n    const numCompareValue = parseFloat(compareValue);\n    const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n    \n    switch (rule.op) {\n      case '==':\n        return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n      case '!=':\n        return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n      case '>':\n        return isNumeric && numPropValue > numCompareValue;\n      case '<':\n        return isNumeric && numPropValue < numCompareValue;\n      case '>=':\n        return isNumeric && numPropValue >= numCompareValue;\n      case '<=':\n        return isNumeric && numPropValue <= numCompareValue;\n      default:\n        return false;\n    }\n  });\n};\n\nconst getNextLoopTrialId_loop_1762902533581 = (lastTrialData) => {\n  if (!lastTrialData || !lastTrialData.trials || !lastTrialData.trials[0]) {\n    return null;\n  }\n  \n  const trial = lastTrialData.trials[0];\n  \n  // Check if trial has branches\n  if (!Array.isArray(trial.branches) || trial.branches.length === 0) {\n    return null;\n  }\n  \n  // Si solo hay un branch O no hay condiciones, seguir al primer branch automáticamente\n  const hasMultipleBranches = trial.branches.length > 1;\n  const hasBranchConditions = Array.isArray(trial.branchConditions) && trial.branchConditions.length > 0;\n  \n  if (!hasMultipleBranches || !hasBranchConditions) {\n    console.log('Loop internal: Auto-branching to first branch:', trial.branches[0]);\n    return trial.branches[0];\n  }\n  \n  // Si hay múltiples branches Y condiciones, evaluar las condiciones\n  const conditions = trial.branchConditions.flat();\n  \n  // Evaluate each condition (OR logic between conditions)\n  for (const condition of conditions) {\n    if (!condition || !condition.rules) {\n      console.warn('Invalid condition structure:', condition);\n      continue;\n    }\n    \n    if (evaluateLoopCondition_loop_1762902533581(trial, condition)) {\n      console.log('Loop internal: Condition matched:', condition);\n      return condition.nextTrialId;\n    }\n  }\n  \n  // No condition matched - seguir al primer branch por defecto\n  console.log('Loop internal: No condition matched, defaulting to first branch:', trial.branches[0]);\n  return trial.branches[0];\n};\n\nconst loop_1762902533581_procedure = {\n  timeline: [nested_wrapper, Seguir_wrapper, Nested_Loop_1_wrapper],\n  timeline_variables: test_stimuli_loop_1762902533581,\n  repetitions: 1,\n  randomize_order: false,\n  \n  conditional_function: function() {\n    const currentId = \"loop_1762902533581\";\n    \n    // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n    const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n    if (jumpToTrial) {\n      if (String(currentId) === String(jumpToTrial)) {\n        // Encontramos el loop objetivo para repeat/jump\n        console.log('Repeat/jump: Found target loop', currentId);\n        localStorage.removeItem('jsPsych_jumpToTrial');\n        return true;\n      }\n      // No es el objetivo, saltar\n      console.log('Repeat/jump: Skipping loop', currentId);\n      return false;\n    }\n    \n    // Si skipRemaining está activo (branching normal), verificar si este es el loop objetivo\n    if (window.skipRemaining) {\n      if (String(currentId) === String(window.nextTrialId)) {\n        // Encontramos el loop objetivo\n        window.skipRemaining = false;\n        window.nextTrialId = null;\n        return true;\n      }\n      // No es el objetivo, saltar\n      return false;\n    }\n    \n    return true;\n  },\n  on_timeline_start: function() {\n    // Resetear las flags al inicio de cada iteración del loop\n    // Esto permite que cada repetición del loop funcione correctamente\n    loop_loop_1762902533581_NextTrialId = null;\n    loop_loop_1762902533581_SkipRemaining = false;\n    loop_loop_1762902533581_BranchingActive = false;\n    loop_loop_1762902533581_BranchCustomParameters = null;\n    loop_loop_1762902533581_TargetExecuted = false;\n    loop_loop_1762902533581_IterationComplete = false;\n    loop_loop_1762902533581_ShouldBranchOnFinish = false;\n    \n    // IMPORTANTE: Si el loop es condicional, resetear también el branching GLOBAL\n    // para que se regenere durante esta iteración del loop\n    \n  },\n  on_timeline_finish: function() {\n    // Resetear las flags al finalizar todas las repeticiones del loop\n    loop_loop_1762902533581_NextTrialId = null;\n    loop_loop_1762902533581_SkipRemaining = false;\n    loop_loop_1762902533581_TargetExecuted = false;\n    loop_loop_1762902533581_BranchingActive = false;\n    loop_loop_1762902533581_BranchCustomParameters = null;\n    \n    // Verificar si se debe hacer branching porque un trial sin branches se completó\n    // pero el loop tiene branches\n    if (loop_loop_1762902533581_ShouldBranchOnFinish && loop_loop_1762902533581_HasBranches) {\n      const branches = [1762902536432];\n      if (branches.length > 0) {\n        \n        // Este es un loop raíz - activar branching global\n        window.nextTrialId = branches[0];\n        window.skipRemaining = true;\n        window.branchingActive = true;\n        console.log('Root loop finished (from internal trial), branching to:', branches[0]);\n      }\n    }\n    \n    // Resetear todas las variables de branching del loop\n    loop_loop_1762902533581_NextTrialId = null;\n    loop_loop_1762902533581_SkipRemaining = false;\n    loop_loop_1762902533581_BranchingActive = false;\n    loop_loop_1762902533581_BranchCustomParameters = null;\n    loop_loop_1762902533581_ShouldBranchOnFinish = false;\n  },\n\n  data: {\n    loop_id: \"loop_1762902533581\"\n  },\n  on_finish: function(data) {\n    // Branching automático al primer branch del loop\n    // Solo si NO se activó desde trial interno (ShouldBranchOnFinish o BranchingActive)\n    if (!loop_loop_1762902533581_ShouldBranchOnFinish && !loop_loop_1762902533581_BranchingActive) {\n      const branches = [1762902536432];\n      if (branches.length > 0) {\n        window.nextTrialId = branches[0];\n        window.skipRemaining = true;\n        window.branchingActive = true;\n        console.log('Loop on_finish: branching to', branches[0]);\n      }\n    }\n  },\n};\ntimeline.push(loop_1762902533581_procedure);\n",
            "isConditionalLoop": false,
            "loopConditions": [],
            "csvJson": [],
            "csvColumns": [],
            "branches": [
              1762902536432
            ]
          },
          {
            "id": 1762902536432,
            "type": "Trial",
            "name": "DEspues del loop",
            "parameters": {
              "includesExtensions": false,
              "extensionType": ""
            },
            "trialCode": "\n    const preloadDEspues_del_loop = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadDEspues_del_loop);\n    \n    const test_stimuli_DEspues_del_loop = [{stimulus: \"<div id=\\\"iern\\\" style=\\\"box-sizing: border-box;\\\">DEspupes del loop</div>\",\nchoices: [\"BUnas\"]}];\n    const DEspues_del_loop_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus\"),\nchoices: jsPsych.timelineVariable(\"choices\"),\n      data: {\n        rt: \"rt\",\nresponse: \"response\",\nstimulus: \"stimulus\",\n        trial_id: 1762902536432,\n        \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      const paramsOverrideConditions = [{\"id\":1762906456091,\"rules\":[{\"trialId\":\"1762902515317\",\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"paramsToOverride\":{\"stimulus\":{\"source\":\"csv\",\"value\":\"stimulus\"}}}];\n      \n      // Evaluate params override conditions\n      for (const condition of paramsOverrideConditions) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Get data from all previous trials\n        const allData = jsPsych.data.get().values();\n        \n        // Check if all rules match (AND logic within condition)\n        const allRulesMatch = condition.rules.every(rule => {\n          if (!rule.trialId || !rule.prop) {\n            return false;\n          }\n          \n          // Find data from the referenced trial\n          const trialData = allData.filter(d => {\n            // Compare both as strings to handle type mismatches\n            return String(d.trial_id) === String(rule.trialId) || d.trial_id === rule.trialId;\n          });\n          if (trialData.length === 0) {\n            return false;\n          }\n          \n          // Use the most recent data if multiple exist\n          const data = trialData[trialData.length - 1];\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convert values for comparison\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        // If all rules match, apply parameter overrides\n        if (allRulesMatch && condition.paramsToOverride) {\n          Object.entries(condition.paramsToOverride).forEach(([key, param]) => {\n            if (param && param.source !== 'none') {\n              if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n                trial[key] = param.value;\n              } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n                // For CSV source, param.value contains the column name, get the actual value from trial\n                trial[key] = trial[param.value];\n              }\n            }\n          });\n          // Break after first matching condition (OR logic between conditions)\n          break;\n        }\n      }\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials outside loops, use window.branchCustomParameters\n      if (window.branchCustomParameters && typeof window.branchCustomParameters === 'object') {\n        console.log('Applying custom parameters to trial:', window.branchCustomParameters);\n        Object.entries(window.branchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        window.branchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Este trial no tiene branches ni repeat conditions, es un trial terminal\n      // Si llegamos aquí después de un branching, terminar el experimento\n      if (window.branchingActive) {\n        jsPsych.abortExperiment('', {});\n      }\n    },\n    };\n    const DEspues_del_loop_procedure = {\n    timeline: \n    [DEspues_del_loop_timeline],\n    timeline_variables: test_stimuli_DEspues_del_loop,\n    conditional_function: function() {\n      const currentId = 1762902536432;\n      \n      // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n      const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n      if (jumpToTrial) {\n        if (String(currentId) === String(jumpToTrial)) {\n          // Encontramos el trial objetivo para repeat/jump\n          console.log('Repeat/jump: Found target trial', currentId);\n          localStorage.removeItem('jsPsych_jumpToTrial');\n          return true;\n        }\n        // No es el objetivo, saltar\n        console.log('Repeat/jump: Skipping trial', currentId);\n        return false;\n      }\n      \n      // Si skipRemaining está activo (branching normal), verificar si este es el trial objetivo\n      if (window.skipRemaining) {\n        if (String(currentId) === String(window.nextTrialId)) {\n          // Encontramos el trial objetivo\n          window.skipRemaining = false;\n          window.nextTrialId = null;\n          return true;\n        }\n        // No es el objetivo, saltar\n        return false;\n      }\n      \n      return true;\n    },\n    \n    };\n    timeline.push(DEspues_del_loop_procedure);\n  ",
            "plugin": "plugin-html-button-response",
            "columnMapping": {
              "stimulus": {
                "source": "typed",
                "value": "<div id=\"iern\" style=\"box-sizing: border-box;\">DEspupes del loop</div>"
              },
              "choices": {
                "source": "typed",
                "value": [
                  "BUnas"
                ]
              },
              "button_html": {
                "source": "none",
                "value": null
              },
              "prompt": {
                "source": "none",
                "value": null
              },
              "trial_duration": {
                "source": "none",
                "value": null
              },
              "button_layout": {
                "source": "none",
                "value": null
              },
              "grid_rows": {
                "source": "none",
                "value": null
              },
              "grid_columns": {
                "source": "none",
                "value": null
              },
              "response_ends_trial": {
                "source": "none",
                "value": null
              },
              "trial_ends_after_audio": {
                "source": "none",
                "value": null
              },
              "response_allowed_while_playing": {
                "source": "none",
                "value": null
              },
              "enable_button_after": {
                "source": "none",
                "value": null
              },
              "stimulus_duration": {
                "source": "none",
                "value": null
              }
            },
            "csvJson": [],
            "csvColumns": [],
            "orders": false,
            "orderColumns": [],
            "stimuliOrders": [],
            "categories": false,
            "categoryColumn": "",
            "paramsOverride": [
              {
                "id": 1762906456091,
                "rules": [
                  {
                    "trialId": "1762902515317",
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "paramsToOverride": {
                  "stimulus": {
                    "source": "csv",
                    "value": "stimulus"
                  }
                }
              }
            ]
          }
        ]
      },
      "createdAt": "2025-11-11T23:08:35.359Z",
      "updatedAt": "2025-11-13T23:56:54.484Z"
    }
  ],
  "configs": [
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "data": {
        "generatedCode": "\n  // --- Firebase config ---\n  const firebaseConfig = {\n    apiKey: \"AIzaSyBEbJ-uGKzsaf2u24KPamBPVZrUmvhFk-Q\",\n    authDomain: \"test-e4cf9.firebaseapp.com\",\n    databaseURL: \"http://localhost:9000?ns=test-e4cf9\",\n    projectId: \"test-e4cf9\",\n    storageBucket: \"test-e4cf9.firebasestorage.app\",\n    messagingSenderId: \"414213417080\",\n    appId: \"1:414213417080:web:98607c621a54d07656e58d\"\n  };\n\n  // --- Cargar Firebase SDK ---\n  if (typeof window.firebase === 'undefined') {\n    const script = document.createElement('script');\n    script.src = 'https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js';\n    script.onload = () => {\n      const dbScript = document.createElement('script');\n      dbScript.src = 'https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js';\n      dbScript.onload = () => { window._firebaseReady = true; };\n      document.head.appendChild(dbScript);\n    };\n    document.head.appendChild(script);\n  } else {\n    window._firebaseReady = true;\n  }\n\n  function waitForFirebase() {\n    return new Promise(resolve => {\n      if (window._firebaseReady) return resolve();\n      const interval = setInterval(() => {\n        if (window._firebaseReady) {\n          clearInterval(interval);\n          resolve();\n        }\n      }, 50);\n    });\n  }\n\n \n  const userStr = null;\n\n  const Uid = userStr.uid\n\n  const trialSessionId =\n    (crypto.randomUUID\n      ? crypto.randomUUID()\n      : Math.random().toString(36).slice(2, 10));\n\n  let participantNumber;\n\n  async function saveSession(trialSessionId) {\n    try {\n      const res = await fetch(\"http://localhost:5001/test-e4cf9/us-central1/apidata\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\", Accept: \"*/*\" },\n        body: JSON.stringify({\n          experimentID: \"c3ac9abb-486f-4f43-a093-fd1173acea6a\",\n          experimentName: \"lwnrv\", \n          sessionId: trialSessionId,\n          storage: \"drive\",\n          uid: Uid\n        }),\n      });\n      \n      console.log('Response status:', res.status);\n      \n      if (!res.ok) {\n        const errorText = await res.text();\n        console.error('Error creating session:', errorText);\n        throw new Error(`Failed to create session: ${res.status} - ${errorText}`);\n      }\n      \n      const result = await res.json();\n      console.log('Session created successfully:', result);\n      \n      if (!result.success) {\n        if (result.message?.includes(\"INVALID_GOOGLE_DRIVE_TOKEN\") || result.message?.includes(\"Invalid Google Drive token\")) {\n          alert(\"Warning: Google Drive token not found or invalid. Please reconnect your Drive account in Settings.\");\n        } else if (result.message?.includes(\"INVALID_DROPBOX_TOKEN\") || result.message?.includes(\"Invalid Dropbox token\")) {\n          alert(\"Warning: Dropbox token not found or invalid. Please reconnect your Dropbox account in Settings.\");\n        }\n        throw new Error(result.message || 'Failed to create session');\n      }\n      \n      participantNumber = result.participantNumber;\n      return participantNumber;\n    } catch (error) {\n      console.error('Error in saveSession:', error);\n      alert('Error creating session: ' + error.message);\n      throw error;\n    }\n  }\n\n  (async () => {\n    // Limpiar el localStorage de valores de sesiones anteriores\n    localStorage.removeItem('jsPsych_jumpToTrial');\n    \n    // Esperar e inicializar Firebase\n    await waitForFirebase();\n    if (!window.firebase.apps.length) {\n      window.firebase.initializeApp(firebaseConfig);\n    }\n    const db = window.firebase.database();\n\n    participantNumber = await saveSession(trialSessionId);\n\n    if (typeof participantNumber !== \"number\" || isNaN(participantNumber)) {\n      alert(\"The participant number is not assigned. Please, wait.\");\n      throw new Error(\"participantNumber not assigned\");\n    }\n\n    // --- Configurar onDisconnect para finalizar sesión automáticamente ---\n    const sessionRef = db.ref('sessions/c3ac9abb-486f-4f43-a093-fd1173acea6a/' + trialSessionId);\n    await sessionRef.set({\n      connected: true,\n      experimentID: 'c3ac9abb-486f-4f43-a093-fd1173acea6a',\n      sessionId: trialSessionId,\n      startedAt: window.firebase.database.ServerValue.TIMESTAMP,\n      storage: 'drive'\n    });\n    \n    // Cuando se desconecte, marcar para que el backend finalice la sesión\n    // Incluir needsFinalization para que se procesen los datos en caso de desconexión\n    sessionRef.onDisconnect().update({\n      connected: false,\n      needsFinalization: true,\n      disconnectedAt: window.firebase.database.ServerValue.TIMESTAMP,\n      storage: 'drive'\n    });\n\n    // --- Branching logic functions (outside initJsPsych for timeline access) ---\n    window.nextTrialId = null;\n    window.skipRemaining = false;\n    window.branchingActive = false;\n    window.branchCustomParameters = null; // Store custom parameters for the next trial\n\n    const evaluateCondition = (trialData, condition) => {\n      // All rules in a condition must be true (AND logic)\n      return condition.rules.every(rule => {\n        const propValue = trialData[rule.prop];\n        const compareValue = rule.value;\n        \n        // Convert values for comparison\n        const numPropValue = parseFloat(propValue);\n        const numCompareValue = parseFloat(compareValue);\n        const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n        \n        switch (rule.op) {\n          case '==':\n            return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n          case '!=':\n            return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n          case '>':\n            return isNumeric && numPropValue > numCompareValue;\n          case '<':\n            return isNumeric && numPropValue < numCompareValue;\n          case '>=':\n            return isNumeric && numPropValue >= numCompareValue;\n          case '<=':\n            return isNumeric && numPropValue <= numCompareValue;\n          default:\n            return false;\n        }\n      });\n    };\n    \n    const getNextTrialId = (lastTrialData) => {\n      if (!lastTrialData || !lastTrialData.trials || !lastTrialData.trials[0]) {\n        return null;\n      }\n      \n      const trial = lastTrialData.trials[0];\n      \n      // Check if trial/loop has branches\n      if (!Array.isArray(trial.branches) || trial.branches.length === 0) {\n        return null;\n      }\n      \n      // Check if there are conditions to evaluate\n      const hasBranchConditions = Array.isArray(trial.branchConditions) && trial.branchConditions.length > 0;\n      \n      // Check if any condition has customParameters\n      const hasCustomParameters = hasBranchConditions && \n        trial.branchConditions.flat().some(condition => \n          condition && condition.customParameters && \n          Object.keys(condition.customParameters).length > 0\n        );\n      \n      // If there are no conditions AND no custom parameters, auto-branch to first branch\n      if (!hasBranchConditions && !hasCustomParameters) {\n        console.log('No conditions or custom parameters defined, auto-branching to first branch:', trial.branches[0]);\n        return trial.branches[0];\n      }\n      \n      // If there are no conditions but there ARE custom parameters, we can't auto-branch\n      // We need to evaluate conditions to know which customParameters to use\n      if (!hasBranchConditions && hasCustomParameters) {\n        console.log('Custom parameters exist but no conditions, cannot auto-branch');\n        return null;\n      }\n      \n      // If there ARE conditions, evaluate them (regardless of how many branches there are)\n      // branchConditions is an array of arrays, flatten it first\n      const conditions = trial.branchConditions.flat();\n      \n      // Evaluate each condition (OR logic between conditions)\n      for (const condition of conditions) {\n        if (!condition || !condition.rules) {\n          console.warn('Invalid condition structure:', condition);\n          continue;\n        }\n        \n        if (evaluateCondition(trial, condition)) {\n          console.log('Condition matched:', condition);\n          // Store custom parameters if they exist\n          if (condition.customParameters) {\n            window.branchCustomParameters = condition.customParameters;\n            console.log('Custom parameters for branch:', window.branchCustomParameters);\n          }\n          return condition.nextTrialId;\n        }\n      }\n      \n      // No condition matched - do NOT branch (conditions were defined but none matched)\n      console.log('No condition matched, NOT branching');\n      return null;\n    };\n\n    const jsPsych = initJsPsych({\n      display_element: document.getElementById('jspsych-container'),\n\n      on_trial_start: function(trial) {\n        const lastTrialData = jsPsych.data.get()\n        if (lastTrialData) {\n        trial.data.prev_response = lastTrialData.response;\n        }\n      },\n\n      \n\n      on_data_update: function (data) {\n\n        fetch(\"http://localhost:5001/test-e4cf9/us-central1/apidata\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\", Accept: \"*/*\" },\n          body: JSON.stringify({\n            experimentID: \"c3ac9abb-486f-4f43-a093-fd1173acea6a\",\n            sessionId: trialSessionId,\n            data: data,\n            storage: \"drive\",\n          }),\n        })\n        .then(res => {\n          if (!res.ok) {\n            return res.text().then(text => {\n              console.error('Error appending data:', text);\n            });\n          }\n          return res.json();\n        })\n        .then(result => {\n          if (result && result.success) {\n            console.log('Data appended to temporary storage');\n          }\n        })\n        .catch(error => {\n          console.error('Error in on_data_update:', error);\n        });\n\n        // Solo evaluar branching si el trial/loop tiene un trial_id o loop_id válido\n        if ((!data.trial_id || data.trial_id === undefined) && (!data.loop_id || data.loop_id === undefined)) {\n          return;\n        }\n        \n        const lastTrialData = jsPsych.data.getLastTrialData();\n        const trial = lastTrialData.trials ? lastTrialData.trials[0] : null;\n        \n        // Verificar si este trial/loop tiene branches\n        if (!trial || !trial.branches || trial.branches.length === 0) {\n          return; // No tiene branches, no hay nada que hacer\n        }\n        \n        // IMPORTANTE: Si el trial está dentro de un loop (isInLoop = true),\n        // NO activar el branching global. Los trials dentro de loops usan su propio\n        // sistema de branching con variables locales (loopNextTrialId, etc.)\n        if (trial.isInLoop === true) {\n          console.log('Trial inside loop detected, skipping global branching');\n          return;\n        }\n        \n        console.log('Trial/Loop data:', lastTrialData);\n        \n        const nextTrialId = getNextTrialId(lastTrialData);\n        console.log('Next trial/loop ID:', nextTrialId);\n        \n        if (nextTrialId) {\n          // Check if nextTrialId is \"FINISH_EXPERIMENT\"\n          if (nextTrialId === 'FINISH_EXPERIMENT') {\n            console.log('Finish experiment requested');\n            jsPsych.abortExperiment('Experiment finished by branching condition', {});\n            return;\n          }\n          \n          window.nextTrialId = nextTrialId;\n          window.skipRemaining = true;\n          window.branchingActive = true;\n          console.log('Branching activated: skip to trial/loop', nextTrialId);\n        }\n      },\n\n      on_finish: async function() {\n        \n        // Cancelar el onDisconnect para evitar conflictos\n        sessionRef.onDisconnect().cancel();\n\n        // Finalizar la sesión normalmente y marcar en Firebase que terminó correctamente\n        console.log('Experiment finished normally, sending data to Google Drive...');\n        \n        try {\n          \n          // Marcar en Firebase que terminó correctamente Y necesita finalización\n          await sessionRef.update({\n            connected: false,\n            finished: true,\n            needsFinalization: true,\n            finishedAt: window.firebase.database.ServerValue.TIMESTAMP\n          });\n          \n          // El backend procesará la finalización al detectar needsFinalization=true\n          console.log('Session marked for finalization in Firebase');\n        } catch (error) {\n          console.error('Error marking session as finished:', error);\n        }\n      },\n  // Uncomment to see the json results after finishing a session experiment\n  // jsPsych.data.displayData('csv');\n});\n\nconst timeline = [];\n\nconst welcome = {\n  type: jsPsychHtmlButtonResponse,\n  stimulus: \"Welcome to the experiment. Press 'Start' to begin.\",\n  choices: ['Start'],\n};\n\ntimeline.push(welcome);\n\n\n    const preloadLoopsiono = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadLoopsiono);\n    \n    const test_stimuli_Loopsiono = [{stimulus: \"<div id=\\\"if8h\\\" style=\\\"box-sizing: border-box;\\\">loop?</div>\",\nchoices: [\"SI\",\"NO\"]}];\n    const Loopsiono_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus\"),\nchoices: jsPsych.timelineVariable(\"choices\"),\n      data: {\n        rt: \"rt\",\nresponse: \"response\",\nstimulus: \"stimulus\",\n        trial_id: 1762902515317,\n        \n        \n        branches: [1762902521115, \"loop_1762902533581\"],\n        branchConditions: [[{\"id\":1762903077448,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"loop_1762902533581\",\"customParameters\":{}},{\"id\":1762903083147,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"1762902521115\",\"customParameters\":{}}]] \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials outside loops, use window.branchCustomParameters\n      if (window.branchCustomParameters && typeof window.branchCustomParameters === 'object') {\n        console.log('Applying custom parameters to trial:', window.branchCustomParameters);\n        Object.entries(window.branchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        window.branchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      \n      \n      // Si hay múltiples branches Y condiciones, la lógica se maneja en Timeline.tsx\n      \n    },\n    };\n    const Loopsiono_procedure = {\n    timeline: \n    [Loopsiono_timeline],\n    timeline_variables: test_stimuli_Loopsiono,\n    conditional_function: function() {\n      const currentId = 1762902515317;\n      \n      // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n      const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n      if (jumpToTrial) {\n        if (String(currentId) === String(jumpToTrial)) {\n          // Encontramos el trial objetivo para repeat/jump\n          console.log('Repeat/jump: Found target trial', currentId);\n          localStorage.removeItem('jsPsych_jumpToTrial');\n          return true;\n        }\n        // No es el objetivo, saltar\n        console.log('Repeat/jump: Skipping trial', currentId);\n        return false;\n      }\n      \n      // Si skipRemaining está activo (branching normal), verificar si este es el trial objetivo\n      if (window.skipRemaining) {\n        if (String(currentId) === String(window.nextTrialId)) {\n          // Encontramos el trial objetivo\n          window.skipRemaining = false;\n          window.nextTrialId = null;\n          return true;\n        }\n        // No es el objetivo, saltar\n        return false;\n      }\n      \n      return true;\n    },\n    \n    };\n    timeline.push(Loopsiono_procedure);\n  \n\n\n    const preloadPuesno = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadPuesno);\n    \n    const test_stimuli_Puesno = [{stimulus: \"<div id=\\\"indp\\\" style=\\\"box-sizing: border-box;\\\">Pues no</div>\",\nchoices: [\"QUENOo\"]}];\n    const Puesno_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus\"),\nchoices: jsPsych.timelineVariable(\"choices\"),\n      data: {\n        rt: \"rt\",\nresponse: \"response\",\nstimulus: \"stimulus\",\n        trial_id: 1762902521115,\n        \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials outside loops, use window.branchCustomParameters\n      if (window.branchCustomParameters && typeof window.branchCustomParameters === 'object') {\n        console.log('Applying custom parameters to trial:', window.branchCustomParameters);\n        Object.entries(window.branchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        window.branchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      \n      // Evaluar repeat conditions (para reiniciar el experimento desde un trial específico)\n      const repeatConditionsArray = [{\"id\":1762903134167,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"jumpToTrialId\":\"1762902515317\"}];\n      \n      for (const condition of repeatConditionsArray) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch && condition.jumpToTrialId) {\n          console.log('Repeat condition matched! Jumping to trial:', condition.jumpToTrialId);\n          // Guardar el trial objetivo en localStorage\n          localStorage.setItem('jsPsych_jumpToTrial', String(condition.jumpToTrialId));\n          // Limpiar el contenedor de jsPsych (jspsych-container es el display_element)\n          const container = document.getElementById('jspsych-container');\n          if (container) {\n            // Limpiar todo el contenido del container\n            container.innerHTML = '';\n          }\n          // Reiniciar el timeline\n          setTimeout(() => {\n            jsPsych.run(timeline);\n          }, 100);\n          return;\n        }\n      }\n      \n      \n      // Este trial no tiene branches, es un trial terminal\n      // Si llegamos aquí después de un branching, terminar el experimento\n      if (window.branchingActive) {\n        jsPsych.abortExperiment('', {});\n      }\n      \n    },\n    };\n    const Puesno_procedure = {\n    timeline: \n    [Puesno_timeline],\n    timeline_variables: test_stimuli_Puesno,\n    conditional_function: function() {\n      const currentId = 1762902521115;\n      \n      // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n      const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n      if (jumpToTrial) {\n        if (String(currentId) === String(jumpToTrial)) {\n          // Encontramos el trial objetivo para repeat/jump\n          console.log('Repeat/jump: Found target trial', currentId);\n          localStorage.removeItem('jsPsych_jumpToTrial');\n          return true;\n        }\n        // No es el objetivo, saltar\n        console.log('Repeat/jump: Skipping trial', currentId);\n        return false;\n      }\n      \n      // Si skipRemaining está activo (branching normal), verificar si este es el trial objetivo\n      if (window.skipRemaining) {\n        if (String(currentId) === String(window.nextTrialId)) {\n          // Encontramos el trial objetivo\n          window.skipRemaining = false;\n          window.nextTrialId = null;\n          return true;\n        }\n        // No es el objetivo, saltar\n        return false;\n      }\n      \n      return true;\n    },\n    \n    };\n    timeline.push(Puesno_procedure);\n  \n\n\n\n    const test_stimuli_loop_1762902533581 = [\n  {\n    \"stimulus_nested\": \"<div id=\\\"ig2k\\\" style=\\\"box-sizing: border-box;\\\">Nested ?</div>\",\n    \"choices_nested\": [\n      \"Seguir\",\n      \"Salirn\"\n    ],\n    \"stimulus_Seguir\": \"<div id=\\\"ip4y\\\" style=\\\"box-sizing: border-box;\\\">Seguir</div>\",\n    \"choices_Seguir\": [\n      \"SI\",\n      \"No\"\n    ]\n  }\n];\n    \n    \n    \n    const preloadnested = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadnested);\n    \n    const nested_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_nested\"),\nchoices: jsPsych.timelineVariable(\"choices_nested\"),\n      data: {\n        rt: \"rt_nested\",\nresponse: \"response_nested\",\nstimulus: \"stimulus_nested\",\n        trial_id: 1762902524841,\n        isInLoop: true,\n        \n        branches: [1762902528773, 1762902912364],\n        branchConditions: [[{\"id\":1762902986815,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762902528773\",\"customParameters\":{}},{\"id\":1762902993518,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"loop_1762907705296\",\"customParameters\":{}}]] \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762902533581_BranchCustomParameters !== 'undefined' && loop_loop_1762902533581_BranchCustomParameters && typeof loop_loop_1762902533581_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762902533581_BranchCustomParameters);\n        Object.entries(loop_loop_1762902533581_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762902533581_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Evaluar condiciones del trial para branching interno del loop\n      const branches = [1762902528773, 1762902912364];\n      const branchConditions = [{\"id\":1762902986815,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762902528773\",\"customParameters\":{}},{\"id\":1762902993518,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"loop_1762907705296\",\"customParameters\":{}}].flat();\n      \n      let nextTrialId = null;\n      let matchedCustomParameters = null;\n      \n      // Evaluar cada condición (lógica OR entre condiciones)\n      for (const condition of branchConditions) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch) {\n          nextTrialId = condition.nextTrialId;\n          // Store custom parameters if they exist\n          if (condition.customParameters) {\n            matchedCustomParameters = condition.customParameters;\n            console.log('Loop branching: matched custom parameters:', matchedCustomParameters);\n          }\n          break;\n        }\n      }\n      \n      // Si se encontró match, activar branching\n      if (nextTrialId) {\n        loop_loop_1762902533581_NextTrialId = nextTrialId;\n        loop_loop_1762902533581_SkipRemaining = true;\n        loop_loop_1762902533581_BranchingActive = true;\n        // Store custom parameters for the next trial in the loop\n        if (matchedCustomParameters) {\n          loop_loop_1762902533581_BranchCustomParameters = matchedCustomParameters;\n        }\n      }\n    },};\n\n\n\n    \n    const preloadSeguir = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadSeguir);\n    \n    const Seguir_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_Seguir\"),\nchoices: jsPsych.timelineVariable(\"choices_Seguir\"),\n      data: {\n        rt: \"rt_Seguir\",\nresponse: \"response_Seguir\",\nstimulus: \"stimulus_Seguir\",\n        trial_id: 1762902528773,\n        isInLoop: true,\n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762902533581_BranchCustomParameters !== 'undefined' && loop_loop_1762902533581_BranchCustomParameters && typeof loop_loop_1762902533581_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762902533581_BranchCustomParameters);\n        Object.entries(loop_loop_1762902533581_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762902533581_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Evaluar repeat conditions (para reiniciar el experimento desde un trial específico)\n      const repeatConditionsArray = [{\"id\":1762903488868,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"jumpToTrialId\":\"1762902515317\"}];\n      \n      let shouldRepeat = false;\n      for (const condition of repeatConditionsArray) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch && condition.jumpToTrialId) {\n          console.log('Repeat condition matched in loop! Jumping to trial:', condition.jumpToTrialId);\n          // Guardar el trial objetivo en localStorage\n          localStorage.setItem('jsPsych_jumpToTrial', String(condition.jumpToTrialId));\n          shouldRepeat = true;\n          break;\n        }\n      }\n      \n      if (shouldRepeat) {\n        // Limpiar el contenedor de jsPsych (jspsych-container es el display_element)\n        const container = document.getElementById('jspsych-container');\n        if (container) {\n          // Limpiar todo el contenido del container\n          container.innerHTML = '';\n        }\n        // Reiniciar el timeline\n        setTimeout(() => {\n          jsPsych.run(timeline);\n        }, 100);\n        return;\n      }\n      \n      \n      // Este trial no tiene branches, verificar si el loop padre tiene branches\n      if (typeof loop_loop_1762902533581_HasBranches !== 'undefined' && loop_loop_1762902533581_HasBranches) {\n        // El loop tiene branches, activar branching del loop al terminar\n        // Esto se manejará en el on_finish del loop\n        loop_loop_1762902533581_ShouldBranchOnFinish = true;\n      } else if (!loop_loop_1762902533581_HasBranches) {\n        // Ni el trial ni el loop tienen branches - trial terminal\n        // Si llegamos aquí después de un branching global, terminar el experimento\n        if (window.branchingActive) {\n          jsPsych.abortExperiment('', {});\n        }\n      }\n      \n    },};\n\n\n\n\n    const test_stimuli_loop_1762907705296 = [\n  {\n    \"stimulus_Inicia_nested\": \"<div id=\\\"ip91\\\" style=\\\"box-sizing: border-box;\\\">inicia nested</div>\",\n    \"choices_Inicia_nested\": [\n      \"Si\",\n      \"Nos\"\n    ],\n    \"stimulus_Final_nested\": \"<div id=\\\"isjo\\\" style=\\\"box-sizing: border-box;\\\">final nested</div>\",\n    \"choices_Final_nested\": [\n      \"Repetir\",\n      \"Salirs\"\n    ],\n    \"stimulus_otravez\": \"<div id=\\\"imna\\\" style=\\\"box-sizing: border-box;\\\">otra vez</div>\",\n    \"choices_otravez\": [\n      \"Dije que no\"\n    ]\n  }\n];\n    \n    \n    \n    const preloadInicia_nested = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadInicia_nested);\n    \n    const Inicia_nested_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_Inicia_nested\"),\nchoices: jsPsych.timelineVariable(\"choices_Inicia_nested\"),\n      data: {\n        rt: \"rt_Inicia_nested\",\nresponse: \"response_Inicia_nested\",\nstimulus: \"stimulus_Inicia_nested\",\n        trial_id: 1762902912364,\n        isInLoop: true,\n        \n        branches: [1762907671377, 1762912004181],\n        branchConditions: [[{\"id\":1762912351921,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762907671377\",\"customParameters\":{}},{\"id\":1762912364305,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"1762912004181\",\"customParameters\":{}}]] \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762907705296_BranchCustomParameters !== 'undefined' && loop_loop_1762907705296_BranchCustomParameters && typeof loop_loop_1762907705296_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762907705296_BranchCustomParameters);\n        Object.entries(loop_loop_1762907705296_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762907705296_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Evaluar condiciones del trial para branching interno del loop\n      const branches = [1762907671377, 1762912004181];\n      const branchConditions = [{\"id\":1762912351921,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"nextTrialId\":\"1762907671377\",\"customParameters\":{}},{\"id\":1762912364305,\"rules\":[{\"prop\":\"response\",\"op\":\"==\",\"value\":\"1\"}],\"nextTrialId\":\"1762912004181\",\"customParameters\":{}}].flat();\n      \n      let nextTrialId = null;\n      let matchedCustomParameters = null;\n      \n      // Evaluar cada condición (lógica OR entre condiciones)\n      for (const condition of branchConditions) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Todas las reglas en una condición deben ser verdaderas (lógica AND)\n        const allRulesMatch = condition.rules.every(rule => {\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convertir valores para comparación\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        if (allRulesMatch) {\n          nextTrialId = condition.nextTrialId;\n          // Store custom parameters if they exist\n          if (condition.customParameters) {\n            matchedCustomParameters = condition.customParameters;\n            console.log('Loop branching: matched custom parameters:', matchedCustomParameters);\n          }\n          break;\n        }\n      }\n      \n      // Si se encontró match, activar branching\n      if (nextTrialId) {\n        loop_loop_1762907705296_NextTrialId = nextTrialId;\n        loop_loop_1762907705296_SkipRemaining = true;\n        loop_loop_1762907705296_BranchingActive = true;\n        // Store custom parameters for the next trial in the loop\n        if (matchedCustomParameters) {\n          loop_loop_1762907705296_BranchCustomParameters = matchedCustomParameters;\n        }\n      }\n    },};\n\n\n\n    \n    const preloadFinal_nested = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadFinal_nested);\n    \n    const Final_nested_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_Final_nested\"),\nchoices: jsPsych.timelineVariable(\"choices_Final_nested\"),\n      data: {\n        rt: \"rt_Final_nested\",\nresponse: \"response_Final_nested\",\nstimulus: \"stimulus_Final_nested\",\n        trial_id: 1762907671377,\n        isInLoop: true,\n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762907705296_BranchCustomParameters !== 'undefined' && loop_loop_1762907705296_BranchCustomParameters && typeof loop_loop_1762907705296_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762907705296_BranchCustomParameters);\n        Object.entries(loop_loop_1762907705296_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762907705296_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Este trial no tiene branches ni repeat conditions, verificar si el loop padre tiene branches\n      if (typeof loop_loop_1762907705296_HasBranches !== 'undefined' && loop_loop_1762907705296_HasBranches) {\n        // El loop tiene branches, activar branching del loop al terminar\n        // Esto se manejará en el on_finish del loop\n        loop_loop_1762907705296_ShouldBranchOnFinish = true;\n      } else if (!loop_loop_1762907705296_HasBranches) {\n        // Ni el trial ni el loop tienen branches - trial terminal\n        // Si llegamos aquí después de un branching global, terminar el experimento\n        if (window.branchingActive) {\n          jsPsych.abortExperiment('', {});\n        }\n      }\n    },};\n\n\n\n    \n    const preloadotravez = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadotravez);\n    \n    const otravez_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus_otravez\"),\nchoices: jsPsych.timelineVariable(\"choices_otravez\"),\n      data: {\n        rt: \"rt_otravez\",\nresponse: \"response_otravez\",\nstimulus: \"stimulus_otravez\",\n        trial_id: 1762912004181,\n        isInLoop: true,\n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials in loops, use loop-specific BranchCustomParameters\n      if (typeof loop_loop_1762907705296_BranchCustomParameters !== 'undefined' && loop_loop_1762907705296_BranchCustomParameters && typeof loop_loop_1762907705296_BranchCustomParameters === 'object') {\n        console.log('Applying custom parameters to loop trial:', loop_loop_1762907705296_BranchCustomParameters);\n        Object.entries(loop_loop_1762907705296_BranchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        loop_loop_1762907705296_BranchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Este trial no tiene branches ni repeat conditions, verificar si el loop padre tiene branches\n      if (typeof loop_loop_1762907705296_HasBranches !== 'undefined' && loop_loop_1762907705296_HasBranches) {\n        // El loop tiene branches, activar branching del loop al terminar\n        // Esto se manejará en el on_finish del loop\n        loop_loop_1762907705296_ShouldBranchOnFinish = true;\n      } else if (!loop_loop_1762907705296_HasBranches) {\n        // Ni el trial ni el loop tienen branches - trial terminal\n        // Si llegamos aquí después de un branching global, terminar el experimento\n        if (window.branchingActive) {\n          jsPsych.abortExperiment('', {});\n        }\n      }\n    },};\n\n\n// --- Branching logic variables for loop loop_1762907705296 ---\nlet loop_loop_1762907705296_NextTrialId = null;\nlet loop_loop_1762907705296_SkipRemaining = false;\nlet loop_loop_1762907705296_BranchingActive = false;\nlet loop_loop_1762907705296_BranchCustomParameters = null; // Store custom parameters for branching within loops\nlet loop_loop_1762907705296_TargetExecuted = false; // Indica si el trial objetivo ya se ejecutó en esta iteración\nlet loop_loop_1762907705296_IterationComplete = false; // Indica que la iteración actual terminó\nconst loop_loop_1762907705296_HasBranches = false;\nlet loop_loop_1762907705296_ShouldBranchOnFinish = false;\n\n\n    const Inicia_nested_wrapper = {\n      timeline: [Inicia_nested_timeline],\n      conditional_function: function() {\n        const currentId = Inicia_nested_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762907705296_TargetExecuted) {\n          \n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762907705296_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762907705296_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762907705296_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n      }\n    };\n\n\n    const Final_nested_wrapper = {\n      timeline: [Final_nested_timeline],\n      conditional_function: function() {\n        const currentId = Final_nested_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762907705296_TargetExecuted) {\n          \n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762907705296_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762907705296_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762907705296_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n      }\n    };\n\n\n    const otravez_wrapper = {\n      timeline: [otravez_timeline],\n      conditional_function: function() {\n        const currentId = otravez_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762907705296_TargetExecuted) {\n          \n          // Último item: resetear flags para la siguiente iteración/repetición\n          loop_loop_1762907705296_NextTrialId = null;\n          loop_loop_1762907705296_SkipRemaining = false;\n          loop_loop_1762907705296_TargetExecuted = false;\n          loop_loop_1762907705296_BranchingActive = false;\n          loop_loop_1762907705296_BranchCustomParameters = null;\n          loop_loop_1762907705296_IterationComplete = false;\n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762907705296_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762907705296_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762907705296_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n        // Último item del timeline: resetear flags para la siguiente iteración/repetición\n        loop_loop_1762907705296_NextTrialId = null;\n        loop_loop_1762907705296_SkipRemaining = false;\n        loop_loop_1762907705296_TargetExecuted = false;\n        loop_loop_1762907705296_BranchingActive = false;\n        loop_loop_1762907705296_BranchCustomParameters = null;\n        loop_loop_1762907705296_IterationComplete = false;\n      }\n    };\n\nconst evaluateLoopCondition_loop_1762907705296 = (trialData, condition) => {\n  // All rules in a condition must be true (AND logic)\n  return condition.rules.every(rule => {\n    const propValue = trialData[rule.prop];\n    const compareValue = rule.value;\n    \n    // Convert values for comparison\n    const numPropValue = parseFloat(propValue);\n    const numCompareValue = parseFloat(compareValue);\n    const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n    \n    switch (rule.op) {\n      case '==':\n        return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n      case '!=':\n        return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n      case '>':\n        return isNumeric && numPropValue > numCompareValue;\n      case '<':\n        return isNumeric && numPropValue < numCompareValue;\n      case '>=':\n        return isNumeric && numPropValue >= numCompareValue;\n      case '<=':\n        return isNumeric && numPropValue <= numCompareValue;\n      default:\n        return false;\n    }\n  });\n};\n\nconst getNextLoopTrialId_loop_1762907705296 = (lastTrialData) => {\n  if (!lastTrialData || !lastTrialData.trials || !lastTrialData.trials[0]) {\n    return null;\n  }\n  \n  const trial = lastTrialData.trials[0];\n  \n  // Check if trial has branches\n  if (!Array.isArray(trial.branches) || trial.branches.length === 0) {\n    return null;\n  }\n  \n  // Si solo hay un branch O no hay condiciones, seguir al primer branch automáticamente\n  const hasMultipleBranches = trial.branches.length > 1;\n  const hasBranchConditions = Array.isArray(trial.branchConditions) && trial.branchConditions.length > 0;\n  \n  if (!hasMultipleBranches || !hasBranchConditions) {\n    console.log('Loop internal: Auto-branching to first branch:', trial.branches[0]);\n    return trial.branches[0];\n  }\n  \n  // Si hay múltiples branches Y condiciones, evaluar las condiciones\n  const conditions = trial.branchConditions.flat();\n  \n  // Evaluate each condition (OR logic between conditions)\n  for (const condition of conditions) {\n    if (!condition || !condition.rules) {\n      console.warn('Invalid condition structure:', condition);\n      continue;\n    }\n    \n    if (evaluateLoopCondition_loop_1762907705296(trial, condition)) {\n      console.log('Loop internal: Condition matched:', condition);\n      return condition.nextTrialId;\n    }\n  }\n  \n  // No condition matched - seguir al primer branch por defecto\n  console.log('Loop internal: No condition matched, defaulting to first branch:', trial.branches[0]);\n  return trial.branches[0];\n};\n\nconst loop_1762907705296_procedure = {\n  timeline: [Inicia_nested_wrapper, Final_nested_wrapper, otravez_wrapper],\n  timeline_variables: test_stimuli_loop_1762907705296,\n  repetitions: 1,\n  randomize_order: false,\n  loop_function: function(data) {\n    // Evaluate loop conditions to determine if the loop should repeat\n    const loopConditionsArray = [{\"id\":1762912141687,\"rules\":[{\"trialId\":\"1762912004181\",\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}]}];\n    \n    // Helper function to get data from a specific trial\n    const getTrialData = (trialId) => {\n      // Get all trials data\n      const allTrials = data.values();\n      \n      // Find the last occurrence of the trial with matching trial_id\n      for (let i = allTrials.length - 1; i >= 0; i--) {\n        const trial = allTrials[i];\n        if (String(trial.trial_id) === String(trialId)) {\n          return trial;\n        }\n      }\n      return null;\n    };\n    \n    // Evaluate a single condition (AND logic between rules)\n    const evaluateCondition = (condition) => {\n      return condition.rules.every(rule => {\n        const trialData = getTrialData(rule.trialId);\n        \n        if (!trialData) {\n          console.warn('Trial data not found for:', rule.trialId);\n          return false;\n        }\n        \n        const propValue = trialData[rule.prop];\n        const compareValue = rule.value;\n        \n        // Convert values for comparison\n        const numPropValue = parseFloat(propValue);\n        const numCompareValue = parseFloat(compareValue);\n        const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n        \n        switch (rule.op) {\n          case '==':\n            return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n          case '!=':\n            return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n          case '>':\n            return isNumeric && numPropValue > numCompareValue;\n          case '<':\n            return isNumeric && numPropValue < numCompareValue;\n          case '>=':\n            return isNumeric && numPropValue >= numCompareValue;\n          case '<=':\n            return isNumeric && numPropValue <= numCompareValue;\n          default:\n            return false;\n        }\n      });\n    };\n    \n    // Evaluate all conditions (OR logic between conditions)\n    const shouldRepeat = loopConditionsArray.some(condition => evaluateCondition(condition));\n    \n    console.log('Loop condition evaluation result:', shouldRepeat);\n    return shouldRepeat;\n  },\n  conditional_function: function() {\n    const currentId = \"loop_1762907705296\";\n    \n    // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n    const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n    if (jumpToTrial) {\n      if (String(currentId) === String(jumpToTrial)) {\n        // Encontramos el loop objetivo para repeat/jump\n        console.log('Repeat/jump: Found target loop', currentId);\n        localStorage.removeItem('jsPsych_jumpToTrial');\n        return true;\n      }\n      // No es el objetivo, saltar\n      console.log('Repeat/jump: Skipping loop', currentId);\n      return false;\n    }\n    \n    // Si skipRemaining está activo (branching normal), verificar si este es el loop objetivo\n    if (window.skipRemaining) {\n      if (String(currentId) === String(window.nextTrialId)) {\n        // Encontramos el loop objetivo\n        window.skipRemaining = false;\n        window.nextTrialId = null;\n        return true;\n      }\n      // No es el objetivo, saltar\n      return false;\n    }\n    \n    return true;\n  },\n  on_timeline_start: function() {\n    // Resetear las flags al inicio de cada iteración del loop\n    // Esto permite que cada repetición del loop funcione correctamente\n    loop_loop_1762907705296_NextTrialId = null;\n    loop_loop_1762907705296_SkipRemaining = false;\n    loop_loop_1762907705296_BranchingActive = false;\n    loop_loop_1762907705296_BranchCustomParameters = null;\n    loop_loop_1762907705296_TargetExecuted = false;\n    loop_loop_1762907705296_IterationComplete = false;\n    loop_loop_1762907705296_ShouldBranchOnFinish = false;\n    \n    // IMPORTANTE: Si el loop es condicional, resetear también el branching GLOBAL\n    // para que se regenere durante esta iteración del loop\n    \n    window.nextTrialId = null;\n    window.skipRemaining = false;\n    window.branchingActive = false;\n    window.branchCustomParameters = null;\n    console.log('Conditional loop iteration starting, reset global branching flags');\n    \n  },\n  on_timeline_finish: function() {\n    // Resetear las flags al finalizar todas las repeticiones del loop\n    loop_loop_1762907705296_NextTrialId = null;\n    loop_loop_1762907705296_SkipRemaining = false;\n    loop_loop_1762907705296_TargetExecuted = false;\n    loop_loop_1762907705296_BranchingActive = false;\n    loop_loop_1762907705296_BranchCustomParameters = null;\n    \n    // Verificar si se debe hacer branching porque un trial sin branches se completó\n    // pero el loop tiene branches\n    if (loop_loop_1762907705296_ShouldBranchOnFinish && loop_loop_1762907705296_HasBranches) {\n      const branches = [];\n      if (branches.length > 0) {\n        \n        // Este es un nested loop - activar branching del loop padre\n        loop_loop_1762902533581_NextTrialId = branches[0];\n        loop_loop_1762902533581_SkipRemaining = true;\n        loop_loop_1762902533581_BranchingActive = true;\n        console.log('Nested loop finished (from internal trial), activating parent loop branching to:', branches[0]);\n      }\n    }\n    \n    // Resetear todas las variables de branching del loop\n    loop_loop_1762907705296_NextTrialId = null;\n    loop_loop_1762907705296_SkipRemaining = false;\n    loop_loop_1762907705296_BranchingActive = false;\n    loop_loop_1762907705296_BranchCustomParameters = null;\n    loop_loop_1762907705296_ShouldBranchOnFinish = false;\n  },\n\n  data: {\n    loop_id: \"loop_1762907705296\"\n  },\n  on_finish: function(data) {\n    // Este loop no tiene branches ni repeat conditions, es un loop terminal\n    // Si llegamos aquí después de un branching, terminar el experimento\n    if (window.branchingActive) {\n      jsPsych.abortExperiment('', {});\n    }\n  },\n};\ntimeline.push(loop_1762907705296_procedure);\n\n\n// --- Branching logic variables for loop loop_1762902533581 ---\nlet loop_loop_1762902533581_NextTrialId = null;\nlet loop_loop_1762902533581_SkipRemaining = false;\nlet loop_loop_1762902533581_BranchingActive = false;\nlet loop_loop_1762902533581_BranchCustomParameters = null; // Store custom parameters for branching within loops\nlet loop_loop_1762902533581_TargetExecuted = false; // Indica si el trial objetivo ya se ejecutó en esta iteración\nlet loop_loop_1762902533581_IterationComplete = false; // Indica que la iteración actual terminó\nconst loop_loop_1762902533581_HasBranches = true;\nlet loop_loop_1762902533581_ShouldBranchOnFinish = false;\n\n\n    const nested_wrapper = {\n      timeline: [nested_timeline],\n      conditional_function: function() {\n        const currentId = nested_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762902533581_TargetExecuted) {\n          \n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762902533581_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762902533581_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762902533581_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n      }\n    };\n\n\n    const Seguir_wrapper = {\n      timeline: [Seguir_timeline],\n      conditional_function: function() {\n        const currentId = Seguir_timeline.data.trial_id;\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762902533581_TargetExecuted) {\n          \n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762902533581_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762902533581_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762902533581_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n      }\n    };\n\n\n    const Nested_Loop_1_wrapper = {\n      timeline: [loop_1762907705296_procedure],\n      conditional_function: function() {\n        const currentId = \"loop_1762907705296\";\n        \n        // Verificar si hay un trial/loop objetivo guardado en localStorage (para repeat/jump global)\n        const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n        if (jumpToTrial) {\n          if (String(currentId) === String(jumpToTrial)) {\n            // Encontramos el trial/loop objetivo para repeat/jump\n            console.log('Repeat/jump: Found target trial/loop inside loop', currentId);\n            localStorage.removeItem('jsPsych_jumpToTrial');\n            return true;\n          }\n          // No es el objetivo, saltar\n          console.log('Repeat/jump: Skipping trial/loop inside loop', currentId);\n          return false;\n        }\n        \n        // Si el item objetivo ya fue ejecutado, saltar todos los items restantes en esta iteración\n        if (loop_loop_1762902533581_TargetExecuted) {\n          \n          // Último item: resetear flags para la siguiente iteración/repetición\n          loop_loop_1762902533581_NextTrialId = null;\n          loop_loop_1762902533581_SkipRemaining = false;\n          loop_loop_1762902533581_TargetExecuted = false;\n          loop_loop_1762902533581_BranchingActive = false;\n          loop_loop_1762902533581_BranchCustomParameters = null;\n          loop_loop_1762902533581_IterationComplete = false;\n          return false;\n        }\n        \n        // Si loopSkipRemaining está activo, verificar si este es el item objetivo\n        if (loop_loop_1762902533581_SkipRemaining) {\n          if (String(currentId) === String(loop_loop_1762902533581_NextTrialId)) {\n            // Encontramos el item objetivo dentro del loop\n            loop_loop_1762902533581_TargetExecuted = true;\n            return true;\n          }\n          // No es el objetivo, saltar\n          return false;\n        }\n        \n        // No hay branching activo, ejecutar normalmente\n        return true;\n      },\n      on_timeline_finish: function() {\n        \n        // Último item del timeline: resetear flags para la siguiente iteración/repetición\n        loop_loop_1762902533581_NextTrialId = null;\n        loop_loop_1762902533581_SkipRemaining = false;\n        loop_loop_1762902533581_TargetExecuted = false;\n        loop_loop_1762902533581_BranchingActive = false;\n        loop_loop_1762902533581_BranchCustomParameters = null;\n        loop_loop_1762902533581_IterationComplete = false;\n      }\n    };\n\nconst evaluateLoopCondition_loop_1762902533581 = (trialData, condition) => {\n  // All rules in a condition must be true (AND logic)\n  return condition.rules.every(rule => {\n    const propValue = trialData[rule.prop];\n    const compareValue = rule.value;\n    \n    // Convert values for comparison\n    const numPropValue = parseFloat(propValue);\n    const numCompareValue = parseFloat(compareValue);\n    const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n    \n    switch (rule.op) {\n      case '==':\n        return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n      case '!=':\n        return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n      case '>':\n        return isNumeric && numPropValue > numCompareValue;\n      case '<':\n        return isNumeric && numPropValue < numCompareValue;\n      case '>=':\n        return isNumeric && numPropValue >= numCompareValue;\n      case '<=':\n        return isNumeric && numPropValue <= numCompareValue;\n      default:\n        return false;\n    }\n  });\n};\n\nconst getNextLoopTrialId_loop_1762902533581 = (lastTrialData) => {\n  if (!lastTrialData || !lastTrialData.trials || !lastTrialData.trials[0]) {\n    return null;\n  }\n  \n  const trial = lastTrialData.trials[0];\n  \n  // Check if trial has branches\n  if (!Array.isArray(trial.branches) || trial.branches.length === 0) {\n    return null;\n  }\n  \n  // Si solo hay un branch O no hay condiciones, seguir al primer branch automáticamente\n  const hasMultipleBranches = trial.branches.length > 1;\n  const hasBranchConditions = Array.isArray(trial.branchConditions) && trial.branchConditions.length > 0;\n  \n  if (!hasMultipleBranches || !hasBranchConditions) {\n    console.log('Loop internal: Auto-branching to first branch:', trial.branches[0]);\n    return trial.branches[0];\n  }\n  \n  // Si hay múltiples branches Y condiciones, evaluar las condiciones\n  const conditions = trial.branchConditions.flat();\n  \n  // Evaluate each condition (OR logic between conditions)\n  for (const condition of conditions) {\n    if (!condition || !condition.rules) {\n      console.warn('Invalid condition structure:', condition);\n      continue;\n    }\n    \n    if (evaluateLoopCondition_loop_1762902533581(trial, condition)) {\n      console.log('Loop internal: Condition matched:', condition);\n      return condition.nextTrialId;\n    }\n  }\n  \n  // No condition matched - seguir al primer branch por defecto\n  console.log('Loop internal: No condition matched, defaulting to first branch:', trial.branches[0]);\n  return trial.branches[0];\n};\n\nconst loop_1762902533581_procedure = {\n  timeline: [nested_wrapper, Seguir_wrapper, Nested_Loop_1_wrapper],\n  timeline_variables: test_stimuli_loop_1762902533581,\n  repetitions: 2,\n  randomize_order: false,\n  \n  conditional_function: function() {\n    const currentId = \"loop_1762902533581\";\n    \n    // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n    const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n    if (jumpToTrial) {\n      if (String(currentId) === String(jumpToTrial)) {\n        // Encontramos el loop objetivo para repeat/jump\n        console.log('Repeat/jump: Found target loop', currentId);\n        localStorage.removeItem('jsPsych_jumpToTrial');\n        return true;\n      }\n      // No es el objetivo, saltar\n      console.log('Repeat/jump: Skipping loop', currentId);\n      return false;\n    }\n    \n    // Si skipRemaining está activo (branching normal), verificar si este es el loop objetivo\n    if (window.skipRemaining) {\n      if (String(currentId) === String(window.nextTrialId)) {\n        // Encontramos el loop objetivo\n        window.skipRemaining = false;\n        window.nextTrialId = null;\n        return true;\n      }\n      // No es el objetivo, saltar\n      return false;\n    }\n    \n    return true;\n  },\n  on_timeline_start: function() {\n    // Resetear las flags al inicio de cada iteración del loop\n    // Esto permite que cada repetición del loop funcione correctamente\n    loop_loop_1762902533581_NextTrialId = null;\n    loop_loop_1762902533581_SkipRemaining = false;\n    loop_loop_1762902533581_BranchingActive = false;\n    loop_loop_1762902533581_BranchCustomParameters = null;\n    loop_loop_1762902533581_TargetExecuted = false;\n    loop_loop_1762902533581_IterationComplete = false;\n    loop_loop_1762902533581_ShouldBranchOnFinish = false;\n    \n    // IMPORTANTE: Si el loop es condicional, resetear también el branching GLOBAL\n    // para que se regenere durante esta iteración del loop\n    \n  },\n  on_timeline_finish: function() {\n    // Resetear las flags al finalizar todas las repeticiones del loop\n    loop_loop_1762902533581_NextTrialId = null;\n    loop_loop_1762902533581_SkipRemaining = false;\n    loop_loop_1762902533581_TargetExecuted = false;\n    loop_loop_1762902533581_BranchingActive = false;\n    loop_loop_1762902533581_BranchCustomParameters = null;\n    \n    // Verificar si se debe hacer branching porque un trial sin branches se completó\n    // pero el loop tiene branches\n    if (loop_loop_1762902533581_ShouldBranchOnFinish && loop_loop_1762902533581_HasBranches) {\n      const branches = [1762902536432];\n      if (branches.length > 0) {\n        \n        // Este es un loop raíz - activar branching global\n        window.nextTrialId = branches[0];\n        window.skipRemaining = true;\n        window.branchingActive = true;\n        console.log('Root loop finished (from internal trial), branching to:', branches[0]);\n      }\n    }\n    \n    // Resetear todas las variables de branching del loop\n    loop_loop_1762902533581_NextTrialId = null;\n    loop_loop_1762902533581_SkipRemaining = false;\n    loop_loop_1762902533581_BranchingActive = false;\n    loop_loop_1762902533581_BranchCustomParameters = null;\n    loop_loop_1762902533581_ShouldBranchOnFinish = false;\n  },\n\n  data: {\n    loop_id: \"loop_1762902533581\"\n  },\n  on_finish: function(data) {\n    // Branching automático al primer branch del loop\n    // Solo si NO se activó desde trial interno (ShouldBranchOnFinish o BranchingActive)\n    if (!loop_loop_1762902533581_ShouldBranchOnFinish && !loop_loop_1762902533581_BranchingActive) {\n      const branches = [1762902536432];\n      if (branches.length > 0) {\n        window.nextTrialId = branches[0];\n        window.skipRemaining = true;\n        window.branchingActive = true;\n        console.log('Loop on_finish: branching to', branches[0]);\n      }\n    }\n  },\n};\ntimeline.push(loop_1762902533581_procedure);\n\n\n\n    const preloadDEspues_del_loop = {\n        type: jsPsychPreload,\n       files: [],\n    }\n    timeline.push(preloadDEspues_del_loop);\n    \n    const test_stimuli_DEspues_del_loop = [{stimulus: \"<div id=\\\"iern\\\" style=\\\"box-sizing: border-box;\\\">DEspupes del loop</div>\",\nchoices: [\"BUnas\"]}];\n    const DEspues_del_loop_timeline = {\n    type: jsPsychHtmlButtonResponse, stimulus: jsPsych.timelineVariable(\"stimulus\"),\nchoices: jsPsych.timelineVariable(\"choices\"),\n      data: {\n        rt: \"rt\",\nresponse: \"response\",\nstimulus: \"stimulus\",\n        trial_id: 1762902536432,\n        \n        \n      },\n    on_start: function(trial) {\n      // First, evaluate and apply params override conditions (if any)\n      \n      const paramsOverrideConditions = [{\"id\":1762906456091,\"rules\":[{\"trialId\":\"1762902515317\",\"prop\":\"response\",\"op\":\"==\",\"value\":\"0\"}],\"paramsToOverride\":{\"stimulus\":{\"source\":\"csv\",\"value\":\"stimulus\"}}}];\n      \n      // Evaluate params override conditions\n      for (const condition of paramsOverrideConditions) {\n        if (!condition || !condition.rules) {\n          continue;\n        }\n        \n        // Get data from all previous trials\n        const allData = jsPsych.data.get().values();\n        \n        // Check if all rules match (AND logic within condition)\n        const allRulesMatch = condition.rules.every(rule => {\n          if (!rule.trialId || !rule.prop) {\n            return false;\n          }\n          \n          // Find data from the referenced trial\n          const trialData = allData.filter(d => {\n            // Compare both as strings to handle type mismatches\n            return String(d.trial_id) === String(rule.trialId) || d.trial_id === rule.trialId;\n          });\n          if (trialData.length === 0) {\n            return false;\n          }\n          \n          // Use the most recent data if multiple exist\n          const data = trialData[trialData.length - 1];\n          const propValue = data[rule.prop];\n          const compareValue = rule.value;\n          \n          // Convert values for comparison\n          const numPropValue = parseFloat(propValue);\n          const numCompareValue = parseFloat(compareValue);\n          const isNumeric = !isNaN(numPropValue) && !isNaN(numCompareValue);\n          \n          switch (rule.op) {\n            case '==':\n              return isNumeric ? numPropValue === numCompareValue : propValue == compareValue;\n            case '!=':\n              return isNumeric ? numPropValue !== numCompareValue : propValue != compareValue;\n            case '>':\n              return isNumeric && numPropValue > numCompareValue;\n            case '<':\n              return isNumeric && numPropValue < numCompareValue;\n            case '>=':\n              return isNumeric && numPropValue >= numCompareValue;\n            case '<=':\n              return isNumeric && numPropValue <= numCompareValue;\n            default:\n              return false;\n          }\n        });\n        \n        // If all rules match, apply parameter overrides\n        if (allRulesMatch && condition.paramsToOverride) {\n          Object.entries(condition.paramsToOverride).forEach(([key, param]) => {\n            if (param && param.source !== 'none') {\n              if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n                trial[key] = param.value;\n              } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n                // For CSV source, param.value contains the column name, get the actual value from trial\n                trial[key] = trial[param.value];\n              }\n            }\n          });\n          // Break after first matching condition (OR logic between conditions)\n          break;\n        }\n      }\n      \n      // Then apply custom parameters from branching conditions (higher priority)\n      \n      // For trials outside loops, use window.branchCustomParameters\n      if (window.branchCustomParameters && typeof window.branchCustomParameters === 'object') {\n        console.log('Applying custom parameters to trial:', window.branchCustomParameters);\n        Object.entries(window.branchCustomParameters).forEach(([key, param]) => {\n          if (param && param.source !== 'none') {\n            // Handle different parameter sources\n            if (param.source === 'typed' && param.value !== undefined && param.value !== null) {\n              // For typed values, use them directly\n              trial[key] = param.value;\n              console.log(`Set trial.${key} = ${param.value}`);\n            } else if (param.source === 'csv' && param.value !== undefined && param.value !== null) {\n              // For CSV values, param.value contains the column name, get the actual value from trial\n              trial[key] = trial[param.value];\n              console.log(`Set trial.${key} = ${trial[param.value]} (from CSV column: ${param.value})`);\n            }\n          }\n        });\n        // Clear the custom parameters after applying them\n        window.branchCustomParameters = null;\n      }\n      \n    },\n    \n    on_finish: function(data) {\n      // Este trial no tiene branches ni repeat conditions, es un trial terminal\n      // Si llegamos aquí después de un branching, terminar el experimento\n      if (window.branchingActive) {\n        jsPsych.abortExperiment('', {});\n      }\n    },\n    };\n    const DEspues_del_loop_procedure = {\n    timeline: \n    [DEspues_del_loop_timeline],\n    timeline_variables: test_stimuli_DEspues_del_loop,\n    conditional_function: function() {\n      const currentId = 1762902536432;\n      \n      // Verificar si hay un trial objetivo guardado en localStorage (para repeat/jump)\n      const jumpToTrial = localStorage.getItem('jsPsych_jumpToTrial');\n      if (jumpToTrial) {\n        if (String(currentId) === String(jumpToTrial)) {\n          // Encontramos el trial objetivo para repeat/jump\n          console.log('Repeat/jump: Found target trial', currentId);\n          localStorage.removeItem('jsPsych_jumpToTrial');\n          return true;\n        }\n        // No es el objetivo, saltar\n        console.log('Repeat/jump: Skipping trial', currentId);\n        return false;\n      }\n      \n      // Si skipRemaining está activo (branching normal), verificar si este es el trial objetivo\n      if (window.skipRemaining) {\n        if (String(currentId) === String(window.nextTrialId)) {\n          // Encontramos el trial objetivo\n          window.skipRemaining = false;\n          window.nextTrialId = null;\n          return true;\n        }\n        // No es el objetivo, saltar\n        return false;\n      }\n      \n      return true;\n    },\n    \n    };\n    timeline.push(DEspues_del_loop_procedure);\n  \n\njsPsych.run(timeline);\n\n})();\n"
      },
      "isDevMode": false,
      "createdAt": "2025-11-11T23:08:07.443Z",
      "updatedAt": "2025-11-13T23:56:42.723Z"
    }
  ],
  "pluginConfigs": [],
  "sessionResults": [
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "55e7e6ec-776e-49fb-959d-5b90012dfc1d",
      "createdAt": "2025-11-13T22:44:44.892Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "rt": 1113,
          "response": 0,
          "stimulus": "<div id=\"if8h\" style=\"box-sizing: border-box;\">loop?</div>",
          "trial_id": 1762902515317,
          "branches": [
            1762902521115,
            "loop_1762902533581"
          ],
          "branchConditions": [
            [
              {
                "id": 1762903077448,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "loop_1762902533581",
                "customParameters": {}
              },
              {
                "id": 1762903083147,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762902521115",
                "customParameters": {}
              }
            ]
          ],
          "trial_type": "html-button-response",
          "trial_index": 1,
          "plugin_version": "2.1.0",
          "time_elapsed": 1116
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 1121
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 1121
        },
        {
          "rt": 709,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1832
        },
        {
          "rt": 881,
          "response": 0,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 11,
          "plugin_version": "2.1.0",
          "time_elapsed": 2716
        },
        {
          "rt": 963,
          "response": 0,
          "stimulus": "<div id=\"isjo\" style=\"box-sizing: border-box;\">final nested</div>",
          "trial_id": 1762907671377,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 12,
          "plugin_version": "2.1.0",
          "time_elapsed": 3682
        },
        {
          "rt": 1197,
          "response": 0,
          "stimulus": "<div id=\"imna\" style=\"box-sizing: border-box;\">otra vez</div>",
          "trial_id": 1762912004181,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 13,
          "plugin_version": "2.1.0",
          "time_elapsed": 4882
        },
        {
          "rt": 747,
          "response": 0,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 14,
          "plugin_version": "2.1.0",
          "time_elapsed": 5632
        },
        {
          "rt": 664,
          "response": 0,
          "stimulus": "<div id=\"isjo\" style=\"box-sizing: border-box;\">final nested</div>",
          "trial_id": 1762907671377,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 15,
          "plugin_version": "2.1.0",
          "time_elapsed": 6299
        },
        {
          "rt": 7149,
          "response": 0,
          "stimulus": "<div id=\"imna\" style=\"box-sizing: border-box;\">otra vez</div>",
          "trial_id": 1762912004181,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 16,
          "plugin_version": "2.1.0",
          "time_elapsed": 13450
        },
        {
          "rt": 730,
          "response": 0,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 17,
          "plugin_version": "2.1.0",
          "time_elapsed": 14182
        },
        {
          "rt": 515,
          "response": 1,
          "stimulus": "<div id=\"isjo\" style=\"box-sizing: border-box;\">final nested</div>",
          "trial_id": 1762907671377,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 18,
          "plugin_version": "2.1.0",
          "time_elapsed": 14699
        },
        {
          "rt": 832,
          "response": 0,
          "stimulus": "<div id=\"imna\" style=\"box-sizing: border-box;\">otra vez</div>",
          "trial_id": 1762912004181,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 19,
          "plugin_version": "2.1.0",
          "time_elapsed": 15533
        },
        {
          "rt": 1364,
          "response": 1,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 20,
          "plugin_version": "2.1.0",
          "time_elapsed": 16899
        },
        {
          "rt": 614,
          "response": 0,
          "stimulus": "<div id=\"isjo\" style=\"box-sizing: border-box;\">final nested</div>",
          "trial_id": 1762907671377,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 21,
          "plugin_version": "2.1.0",
          "time_elapsed": 17515
        },
        {
          "rt": 616,
          "response": 0,
          "stimulus": "<div id=\"imna\" style=\"box-sizing: border-box;\">otra vez</div>",
          "trial_id": 1762912004181,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 22,
          "plugin_version": "2.1.0",
          "time_elapsed": 18133
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "3eec4451-fac5-4e30-bfe4-f1d00f256354",
      "createdAt": "2025-11-13T23:16:36.603Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 4,
          "plugin_version": "2.1.0",
          "time_elapsed": 2427
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 2428
        },
        {
          "rt": 493,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 2922
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 12,
          "plugin_version": "2.1.0",
          "time_elapsed": 3558
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 0
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 769
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 770
        },
        {
          "rt": 875,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1647
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 12,
          "plugin_version": "2.1.0",
          "time_elapsed": 2365
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 0
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 669
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 669
        },
        {
          "rt": 611,
          "response": 0,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1281
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "7a732c57-e88b-4259-b3e9-b88f170e1446",
      "createdAt": "2025-11-13T23:16:46.552Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 0
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 703
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 703
        },
        {
          "rt": 928,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1633
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "c1dad918-bc7b-4392-920c-46cf50ff5518",
      "createdAt": "2025-11-13T23:16:51.713Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 6,
          "plugin_version": "2.1.0",
          "time_elapsed": 939
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 940
        },
        {
          "rt": 749,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1690
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "cb47030b-d395-4ec6-8343-814181a45650",
      "createdAt": "2025-11-13T23:16:55.469Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 897
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 897
        },
        {
          "rt": 627,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1526
        },
        {
          "rt": 447,
          "response": 0,
          "stimulus": "<div id=\"ip4y\" style=\"box-sizing: border-box;\">Seguir</div>",
          "trial_id": 1762902528773,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 10,
          "plugin_version": "2.1.0",
          "time_elapsed": 1975
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 838
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 838
        },
        {
          "rt": 945,
          "response": 0,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1784
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "1b0a45dc-9361-47da-bf7f-d18e317880a2",
      "createdAt": "2025-11-13T23:17:01.829Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 0
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "61a87a09-51dc-4d1a-ba11-37f76db9993c",
      "createdAt": "2025-11-13T23:17:22.331Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "rt": 777,
          "response": 0,
          "stimulus": "<div id=\"if8h\" style=\"box-sizing: border-box;\">loop?</div>",
          "trial_id": 1762902515317,
          "branches": [
            1762902521115,
            "loop_1762902533581"
          ],
          "branchConditions": [
            [
              {
                "id": 1762903077448,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "loop_1762902533581",
                "customParameters": {}
              },
              {
                "id": 1762903083147,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762902521115",
                "customParameters": {}
              }
            ]
          ],
          "trial_type": "html-button-response",
          "trial_index": 1,
          "plugin_version": "2.1.0",
          "time_elapsed": 779
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 784
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 785
        },
        {
          "rt": 359,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1145
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 12,
          "plugin_version": "2.1.0",
          "time_elapsed": 1865
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 717
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 718
        },
        {
          "rt": 694,
          "response": 0,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1413
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "6c87a747-3a7e-4755-a626-cbfda8181641",
      "createdAt": "2025-11-13T23:17:27.443Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "7cc9e01c-9fdc-493d-bf9b-83b6e0bb93af",
      "createdAt": "2025-11-13T23:31:14.264Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 2
        },
        {
          "rt": 2116,
          "response": 0,
          "stimulus": "<div id=\"if8h\" style=\"box-sizing: border-box;\">loop?</div>",
          "trial_id": 1762902515317,
          "branches": [
            1762902521115,
            "loop_1762902533581"
          ],
          "branchConditions": [
            [
              {
                "id": 1762903077448,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "loop_1762902533581",
                "customParameters": {}
              },
              {
                "id": 1762903083147,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762902521115",
                "customParameters": {}
              }
            ]
          ],
          "trial_type": "html-button-response",
          "trial_index": 1,
          "plugin_version": "2.1.0",
          "time_elapsed": 2119
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 2125
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 2125
        },
        {
          "rt": 543,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 2669
        },
        {
          "rt": 896,
          "response": 0,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 11,
          "plugin_version": "2.1.0",
          "time_elapsed": 3569
        },
        {
          "rt": 980,
          "response": 1,
          "stimulus": "<div id=\"isjo\" style=\"box-sizing: border-box;\">final nested</div>",
          "trial_id": 1762907671377,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 12,
          "plugin_version": "2.1.0",
          "time_elapsed": 4552
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "72b5a142-5cac-4f8c-b612-c862a99a48af",
      "createdAt": "2025-11-13T23:31:36.669Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "rt": 2148,
          "response": 0,
          "stimulus": "<div id=\"if8h\" style=\"box-sizing: border-box;\">loop?</div>",
          "trial_id": 1762902515317,
          "branches": [
            1762902521115,
            "loop_1762902533581"
          ],
          "branchConditions": [
            [
              {
                "id": 1762903077448,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "loop_1762902533581",
                "customParameters": {}
              },
              {
                "id": 1762903083147,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762902521115",
                "customParameters": {}
              }
            ]
          ],
          "trial_type": "html-button-response",
          "trial_index": 1,
          "plugin_version": "2.1.0",
          "time_elapsed": 2151
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 2155
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 2156
        },
        {
          "rt": 1576,
          "response": 0,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 3733
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 12,
          "plugin_version": "2.1.0",
          "time_elapsed": 4601
        },
        {
          "rt": 547,
          "response": 0,
          "stimulus": "<div id=\"iern\" style=\"box-sizing: border-box;\">DEspupes del loop</div>",
          "trial_id": 1762902536432,
          "trial_type": "html-button-response",
          "trial_index": 13,
          "plugin_version": "2.1.0",
          "time_elapsed": 5151
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "413c38f1-e88c-4b19-8a76-6c5f2a2c5351",
      "createdAt": "2025-11-13T23:31:43.382Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 0
        },
        {
          "rt": 1644,
          "response": 0,
          "stimulus": "<div id=\"if8h\" style=\"box-sizing: border-box;\">loop?</div>",
          "trial_id": 1762902515317,
          "branches": [
            1762902521115,
            "loop_1762902533581"
          ],
          "branchConditions": [
            [
              {
                "id": 1762903077448,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "loop_1762902533581",
                "customParameters": {}
              },
              {
                "id": 1762903083147,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762902521115",
                "customParameters": {}
              }
            ]
          ],
          "trial_type": "html-button-response",
          "trial_index": 1,
          "plugin_version": "2.1.0",
          "time_elapsed": 1645
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 1649
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 1649
        },
        {
          "rt": 1879,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 3530
        },
        {
          "rt": 1095,
          "response": 1,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 11,
          "plugin_version": "2.1.0",
          "time_elapsed": 4628
        },
        {
          "rt": 830,
          "response": 0,
          "stimulus": "<div id=\"imna\" style=\"box-sizing: border-box;\">otra vez</div>",
          "trial_id": 1762912004181,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 13,
          "plugin_version": "2.1.0",
          "time_elapsed": 5462
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "37d53b12-50d0-4dea-88df-612e3b2b9db2",
      "createdAt": "2025-11-13T23:32:07.799Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 2,
          "plugin_version": "2.1.0",
          "time_elapsed": 2473
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 3091
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 10,
          "plugin_version": "2.1.0",
          "time_elapsed": 3092
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 0
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 604
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 604
        },
        {
          "rt": 542,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1148
        },
        {
          "rt": 1163,
          "response": 0,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 11,
          "plugin_version": "2.1.0",
          "time_elapsed": 2315
        },
        {
          "rt": 1197,
          "response": 0,
          "stimulus": "<div id=\"isjo\" style=\"box-sizing: border-box;\">final nested</div>",
          "trial_id": 1762907671377,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 12,
          "plugin_version": "2.1.0",
          "time_elapsed": 3515
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "d7f022f5-c788-4e69-9cc4-160a08b04376",
      "createdAt": "2025-11-13T23:40:13.216Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "d5f6cfa0-f2e4-4b89-9c25-938fc2ecbe74",
      "createdAt": "2025-11-13T23:40:22.508Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 2236
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 2237
        },
        {
          "rt": 575,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 2813
        },
        {
          "rt": 579,
          "response": 0,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 11,
          "plugin_version": "2.1.0",
          "time_elapsed": 3397
        },
        {
          "rt": 1512,
          "response": 1,
          "stimulus": "<div id=\"isjo\" style=\"box-sizing: border-box;\">final nested</div>",
          "trial_id": 1762907671377,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 12,
          "plugin_version": "2.1.0",
          "time_elapsed": 4913
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "b0f1651b-d586-4a95-8bf2-15e24ea93838",
      "createdAt": "2025-11-13T23:40:29.394Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 0
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 6,
          "plugin_version": "2.1.0",
          "time_elapsed": 901
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 902
        },
        {
          "rt": 983,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1886
        },
        {
          "rt": 947,
          "response": 0,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 11,
          "plugin_version": "2.1.0",
          "time_elapsed": 2835
        },
        {
          "rt": 747,
          "response": 0,
          "stimulus": "<div id=\"isjo\" style=\"box-sizing: border-box;\">final nested</div>",
          "trial_id": 1762907671377,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 12,
          "plugin_version": "2.1.0",
          "time_elapsed": 3585
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "15c8410d-d3ab-419a-897e-c80e81a3268a",
      "createdAt": "2025-11-13T23:40:54.969Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "rt": 717,
          "response": 0,
          "stimulus": "<div id=\"if8h\" style=\"box-sizing: border-box;\">loop?</div>",
          "trial_id": 1762902515317,
          "branches": [
            1762902521115,
            "loop_1762902533581"
          ],
          "branchConditions": [
            [
              {
                "id": 1762903077448,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "loop_1762902533581",
                "customParameters": {}
              },
              {
                "id": 1762903083147,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762902521115",
                "customParameters": {}
              }
            ]
          ],
          "trial_type": "html-button-response",
          "trial_index": 1,
          "plugin_version": "2.1.0",
          "time_elapsed": 719
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 724
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 724
        },
        {
          "rt": 326,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 1052
        },
        {
          "rt": 548,
          "response": 0,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 11,
          "plugin_version": "2.1.0",
          "time_elapsed": 1604
        },
        {
          "rt": 662,
          "response": 0,
          "stimulus": "<div id=\"isjo\" style=\"box-sizing: border-box;\">final nested</div>",
          "trial_id": 1762907671377,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 12,
          "plugin_version": "2.1.0",
          "time_elapsed": 2270
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "f28e2611-90a1-4224-a12b-f1861c13f4cf",
      "createdAt": "2025-11-13T23:41:06.422Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "06d20fd4-0a7f-42eb-886a-ab5a9c47a663",
      "createdAt": "2025-11-13T23:41:17.660Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 2,
          "plugin_version": "2.1.0",
          "time_elapsed": 1407
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 1411
        },
        {
          "rt": 772,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 9,
          "plugin_version": "2.1.0",
          "time_elapsed": 2186
        },
        {
          "rt": 1577,
          "response": 1,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 11,
          "plugin_version": "2.1.0",
          "time_elapsed": 3768
        },
        {
          "rt": 869,
          "response": 0,
          "stimulus": "<div id=\"imna\" style=\"box-sizing: border-box;\">otra vez</div>",
          "trial_id": 1762912004181,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "loop_name": "Nested Loop 1",
          "trial_type": "html-button-response",
          "trial_index": 13,
          "plugin_version": "2.1.0",
          "time_elapsed": 4642
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "ce70f780-772d-4cef-95c6-6304e552da6b",
      "createdAt": "2025-11-13T23:55:19.560Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 2
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 2,
          "plugin_version": "2.1.0",
          "time_elapsed": 837
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 840
        },
        {
          "rt": 429,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 10,
          "plugin_version": "2.1.0",
          "time_elapsed": 1270
        }
      ]
    },
    {
      "experimentID": "c3ac9abb-486f-4f43-a093-fd1173acea6a",
      "sessionId": "518b2675-d9fd-4dfc-95da-90b433ac83e4",
      "createdAt": "2025-11-13T23:56:41.746Z",
      "data": [
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 0,
          "plugin_version": "2.1.0",
          "time_elapsed": 1
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 7,
          "plugin_version": "2.1.0",
          "time_elapsed": 1717
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 8,
          "plugin_version": "2.1.0",
          "time_elapsed": 1718
        },
        {
          "rt": 412,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 10,
          "plugin_version": "2.1.0",
          "time_elapsed": 2131
        },
        {
          "rt": 613,
          "response": 0,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 12,
          "plugin_version": "2.1.0",
          "time_elapsed": 2748
        },
        {
          "rt": 731,
          "response": 1,
          "stimulus": "<div id=\"isjo\" style=\"box-sizing: border-box;\">final nested</div>",
          "trial_id": 1762907671377,
          "isInLoop": true,
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 13,
          "plugin_version": "2.1.0",
          "time_elapsed": 3481
        },
        {
          "rt": 1179,
          "response": 1,
          "stimulus": "<div id=\"ig2k\" style=\"box-sizing: border-box;\">Nested ?</div>",
          "trial_id": 1762902524841,
          "isInLoop": true,
          "branches": [
            1762902528773,
            1762902912364
          ],
          "branchConditions": [
            [
              {
                "id": 1762902986815,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762902528773",
                "customParameters": {}
              },
              {
                "id": 1762902993518,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "loop_1762907705296",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 15,
          "plugin_version": "2.1.0",
          "time_elapsed": 4664
        },
        {
          "rt": 681,
          "response": 0,
          "stimulus": "<div id=\"ip91\" style=\"box-sizing: border-box;\">inicia nested</div>",
          "trial_id": 1762902912364,
          "isInLoop": true,
          "branches": [
            1762907671377,
            1762912004181
          ],
          "branchConditions": [
            [
              {
                "id": 1762912351921,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "0"
                  }
                ],
                "nextTrialId": "1762907671377",
                "customParameters": {}
              },
              {
                "id": 1762912364305,
                "rules": [
                  {
                    "prop": "response",
                    "op": "==",
                    "value": "1"
                  }
                ],
                "nextTrialId": "1762912004181",
                "customParameters": {}
              }
            ]
          ],
          "loop_id": "loop_1762902533581",
          "trial_type": "html-button-response",
          "trial_index": 17,
          "plugin_version": "2.1.0",
          "time_elapsed": 5348
        },
        {
          "success": true,
          "timeout": false,
          "failed_images": [],
          "failed_audio": [],
          "failed_video": [],
          "trial_type": "preload",
          "trial_index": 20,
          "plugin_version": "2.1.0",
          "time_elapsed": 5816
        },
        {
          "rt": 612,
          "response": 0,
          "stimulus": "<div id=\"iern\" style=\"box-sizing: border-box;\">DEspupes del loop</div>",
          "trial_id": 1762902536432,
          "trial_type": "html-button-response",
          "trial_index": 21,
          "plugin_version": "2.1.0",
          "time_elapsed": 6431
        }
      ]
    }
  ]
}