<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="https://unpkg.com/jspsych@8.2.2"></script>
    <script src="./dist/index.iife.js"></script>

    <link
      href="https://unpkg.com/jspsych@8.2.2/css/jspsych.css"
      rel="stylesheet"
      type="text/css"
    />
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      #jspsych-dynamic-plugin-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
      }
      .dynamic-image-component,
      #jspsych-html-component-main,
      #jspsych-button-response-main {
        visibility: visible !important;
      }
      img,
      canvas {
        display: block;
      }
    </style>
  </head>
  <body></body>
  <script>
    /* initialize jsPsych */
    var jsPsych = initJsPsych({
      on_finish: function () {
        jsPsych.data.displayData();
      },
    });

    /* create timeline */
    var timeline = [];
    const procedure = {
      type: DynamicPlugin,
      components: [
        {
          type: "ImageComponent",
          stimulus: "cofre.png",
          coordinates: { x: 0.0, y: 0 },
        },
        {
          type: "ImageComponent",
          stimulus: "armadillo.png",
          coordinates: { x: 0.0, y: 1 },
        },
        {
          type: "HtmlComponent",
          stimulus: "<p>Cola</p>",
          coordinates: { x: 0, y: 0 },
        },
        // {
        //   type: "VideoComponent",
        //   stimulus_video: ["Dembow.mp4"],
        //   coordinates: { x: 1, y: 1 },
        // },
      ],
      response_components: [
        {
          type: "ButtonResponseComponent",
          choices: ["Yes", "No"],
          coordinates: { x: 0, y: 0 },
          button_html: (choice, choice_index) => {
            const templates = [
              '<button id="ih2p" style="box-sizing: border-box; padding: 10px 20px; border-radius: 6px; background: #3b82f6; color: white; border: none; font-weight: 600; cursor: pointer;">Option 1</button>',
              '<button id="ikr9" style="box-sizing: border-box; padding: 10px 20px; border-radius: 6px; background: #10b981; color: white; border: none; font-weight: 600; cursor: pointer;">Option 2</button>',
              '<button id="ituj" style="box-sizing: border-box; padding: 10px 20px; border-radius: 6px; background: #f59e0b; color: white; border: none; font-weight: 600; cursor: pointer;">Option 3</button>',
            ];
            return templates[choice_index] || templates[0];
          },
        },
        {
          type: "KeyboardResponseComponent",
          choices: "ALL_KEYS",
          coordinates: { x: 0, y: 0 },
        },
        {
          type: "ButtonResponseComponent",
          choices: ["Yes2", "No2"],
          coordinates: { x: 0.1, y: 0 },
        },
      ],
    };

    timeline.push(procedure);
    const procedure2 = {
      type: DynamicPlugin,
      components: [
        {
          type: "ImageComponent",
          stimulus: "cofre.png",
          coordinates: { x: 0.0, y: 0 },
        },
        {
          type: "ImageComponent",
          stimulus: "armadillo.png",
          coordinates: { x: 0.0, y: 1 },
        },
        {
          type: "HtmlComponent",
          stimulus: "<p>Cola</p>",
          coordinates: { x: 0, y: 0 },
        },
        {
          type: "VideoComponent",
          stimulus: ["Dembow.mp4"],
          coordinates: { x: 1, y: 1 },
        },
        {
          type: "AudioComponent",
          stimulus: "Alexa.mp3",
          pan: -1,
          coordinates: { x: 1, y: 1 },
        },
      ],
      response_components: [
        {
          type: "ButtonResponseComponent",
          choices: ["Yes", "No"],
          coordinates: { x: 0, y: 0 },
        },
        {
          type: "KeyboardResponseComponent",
          choices: "ALL_KEYS",
          coordinates: { x: 0, y: 0 },
        },
        {
          type: "ButtonResponseComponent",
          choices: ["Yes2", "No2"],
          coordinates: { x: 0.1, y: 0 },
        },
      ],
    };

    timeline.push(procedure2);
    /* start the experiment */
    jsPsych.run(timeline);
  </script>
</html>
