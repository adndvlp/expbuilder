<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="https://unpkg.com/jspsych@8.2.2"></script>
    <script src="./dist/index.iife.js"></script>

    <link
      href="https://unpkg.com/jspsych@8.2.2/css/jspsych.css"
      rel="stylesheet"
      type="text/css"
    />
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      #jspsych-dynamic-plugin-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
      }
      .dynamic-image-component,
      #jspsych-html-component-main,
      #jspsych-button-response-main {
        visibility: visible !important;
      }
      img,
      canvas {
        display: block;
      }
    </style>
  </head>
  <body></body>
  <script>
    /* initialize jsPsych */
    var jsPsych = initJsPsych({
      on_finish: function () {
        jsPsych.data.displayData();
      },
    });

    /* create timeline */
    var timeline = [];
    // Example 1: Slider without internal button - using external ButtonResponseComponent
    const sliderWithButtonTrial = {
      type: DynamicPlugin,
      components: [
        {
          type: "HtmlComponent",
          stimulus: "<h2>How much do you like this?</h2>",
          coordinates: { x: 0, y: -0.5 },
        },
      ],
      response_components: [
        {
          type: "SliderResponseComponent",
          min: 0,
          max: 100,
          slider_start: 50,
          step: 1,
          labels: ["Not at all", "Very much"],
          require_movement: true,
          coordinates: { x: 0, y: 0 },
        },
        {
          type: "ButtonResponseComponent",
          choices: ["Continue"],
          coordinates: { x: 0, y: 0.5 },
        },
      ],
    };

    // Example 2: Input (Cloze) component with external button
    const inputResponseTrial = {
      type: DynamicPlugin,
      components: [
        {
          type: "HtmlComponent",
          stimulus: "<h2>Fill in the blanks:</h2>",
          coordinates: { x: 0, y: -0.6 },
        },
      ],
      response_components: [
        {
          type: "InputResponseComponent",
          text: "The capital of France is %Paris%. The largest planet is %Jupiter%.",
          check_answers: true,
          allow_blanks: false,
          coordinates: { x: 0, y: -0.2 },
        },

        {
          type: "ButtonResponseComponent",
          choices: ["Submit Answers"],
          coordinates: { x: 0, y: 0.5 },
        },
      ],
    };

    // Example 3: Multiple input fields without answer checking
    const freeInputTrial = {
      type: DynamicPlugin,
      components: [
        {
          type: "HtmlComponent",
          stimulus: "<h2>Tell us about yourself:</h2>",
          coordinates: { x: 0, y: -0.6 },
        },
      ],
      response_components: [
        {
          type: "InputResponseComponent",
          text: "Name: %% <br> Age: %% <br> Favorite color: %%",
          check_answers: false,
          allow_blanks: true,
          coordinates: { x: 0, y: 0 },
        },
        {
          type: "ButtonResponseComponent",
          choices: ["Next"],
          coordinates: { x: 0, y: 0.5 },
        },
      ],
    };

    // Example 4: Combined slider and keyboard response
    const multiResponseTrial = {
      type: DynamicPlugin,
      components: [
        {
          type: "HtmlComponent",
          stimulus:
            "<h2>Rate and respond</h2><p>Use the slider or press a key (1-5)</p>",
          coordinates: { x: 0, y: -0.5 },
        },
      ],
      response_components: [
        {
          type: "SliderResponseComponent",
          min: 1,
          max: 5,
          slider_start: 3,
          step: 1,
          labels: ["1", "2", "3", "4", "5"],
          require_movement: false,
          coordinates: { x: 0, y: 0 },
        },
        {
          type: "KeyboardResponseComponent",
          choices: ["1", "2", "3", "4", "5"],
        },
      ],
    };

    // Sketchpad example
    const sketchpadTrial = {
      type: DynamicPlugin,
      components: [
        {
          type: "SketchpadComponent",
          canvas_shape: "circle",
          canvas_width: 400,
          canvas_height: 300,
          canvas_border_width: 2,
          canvas_border_color: "#000",
          background_color: "#ffffff",
          stroke_width: 3,
          stroke_color: "#0000ff",
          prompt: "<p>Draw something!</p>",
          prompt_location: "abovecanvas",
          show_clear_button: true,
          clear_button_label: "Clear",
          show_undo_button: true,
          undo_button_label: "Undo",
          show_redo_button: true,
          redo_button_label: "Redo",
          coordinates: { x: 0, y: 0 },
        },
      ],
      response_components: [
        {
          type: "ButtonResponseComponent",
          choices: ["Continue"],
          coordinates: { x: 0, y: 0.7 },
        },
      ],
    };

    // Add trials to timeline
    timeline.push(sliderWithButtonTrial);
    timeline.push(inputResponseTrial);
    timeline.push(freeInputTrial);
    timeline.push(multiResponseTrial);
    timeline.push(sketchpadTrial);
    const procedure2 = {
      type: DynamicPlugin,
      components: [
        {
          type: "ImageComponent",
          stimulus: "cofre.png",
          coordinates: { x: 0.0, y: 0 },
        },
        {
          type: "ImageComponent",
          stimulus: "armadillo.png",
          coordinates: { x: 0.0, y: 1 },
        },
        {
          type: "HtmlComponent",
          stimulus: "<p>Cola</p>",
          coordinates: { x: 0, y: 0 },
        },
        {
          type: "VideoComponent",
          stimulus: ["Dembow.mp4"],
          coordinates: { x: 1, y: 1 },
        },
        {
          type: "AudioComponent",
          stimulus: "Alexa.mp3",
          pan: -1,
          coordinates: { x: 1, y: 1 },
        },
      ],
      response_components: [
        {
          type: "ButtonResponseComponent",
          choices: ["Yes", "No"],
          coordinates: { x: 0, y: 0 },
        },
        {
          type: "KeyboardResponseComponent",
          choices: "ALL_KEYS",
          coordinates: { x: 0, y: 0 },
        },
        {
          type: "ButtonResponseComponent",
          choices: ["Yes2", "No2"],
          coordinates: { x: 0.1, y: 0 },
        },
      ],
    };

    timeline.push(procedure2);
    /* start the experiment */
    jsPsych.run(timeline);
  </script>
</html>
